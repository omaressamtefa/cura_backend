2025-05-02 04:56:00.461 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 04:56:00.659 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 04:56:00.662 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 04:56:00.736 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 04:56:00.738 +03:00 [INF] Hosting environment: Development
2025-05-02 04:56:00.740 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 04:56:01.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger - null null
2025-05-02 04:56:01.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger - 301 0 null 175.4641ms
2025-05-02 04:56:01.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 04:56:01.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 39.6898ms
2025-05-02 04:56:01.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/swagger-ui-bundle.js - null null
2025-05-02 04:56:01.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/swagger-ui.css - null null
2025-05-02 04:56:01.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 04:56:01.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/swagger-ui-standalone-preset.js - null null
2025-05-02 04:56:01.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 04:56:01.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 44.147ms
2025-05-02 04:56:01.565 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-02 04:56:01.566 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-02 04:56:01.569 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/swagger-ui-standalone-preset.js - 200 312163 text/javascript 52.2355ms
2025-05-02 04:56:01.569 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/swagger-ui.css - 200 144929 text/css 52.3481ms
2025-05-02 04:56:01.577 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-02 04:56:01.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/swagger-ui-bundle.js - 200 1061536 text/javascript 63.2013ms
2025-05-02 04:56:01.591 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.9016ms
2025-05-02 04:56:01.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-32x32.png - null null
2025-05-02 04:56:01.666 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-02 04:56:01.668 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-32x32.png - 200 628 image/png 7.5285ms
2025-05-02 04:56:01.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 04:56:01.721 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.5259ms
2025-05-02 04:56:23.386 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 04:56:23.391 +03:00 [INF] CORS policy execution successful.
2025-05-02 04:56:23.395 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 04:56:23.418 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 04:56:23.561 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 04:56:24.923 +03:00 [INF] Executed DbCommand (120ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 04:56:25.167 +03:00 [INF] Admin login successful for email: admin@gmail.com
2025-05-02 04:56:25.170 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 04:56:25.178 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1756.117ms
2025-05-02 04:56:25.180 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 04:56:25.184 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1798.5995ms
2025-05-02 04:56:48.554 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-05-02 04:56:48.602 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 04:56:48.607 +03:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 04:56:48.615 +03:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 04:56:48.619 +03:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 04:56:48.754 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-05-02 04:56:48.853 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-02 04:56:48.868 +03:00 [INF] Successfully retrieved 1 doctors
2025-05-02 04:56:48.872 +03:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 04:56:48.881 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 272.3353ms
2025-05-02 04:56:48.882 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 04:56:48.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 329.4439ms
2025-05-02 06:06:49.049 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 06:06:49.225 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 06:06:49.228 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 06:06:49.297 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 06:06:49.299 +03:00 [INF] Hosting environment: Development
2025-05-02 06:06:49.301 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 06:06:50.057 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 06:06:50.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 210.3832ms
2025-05-02 06:06:50.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 06:06:50.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 06:06:50.296 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.5226ms
2025-05-02 06:06:50.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.8149ms
2025-05-02 06:06:50.411 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 06:06:50.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.8439ms
2025-05-02 18:44:01.634 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:44:01.918 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 18:44:01.921 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 18:44:02.033 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:44:02.036 +03:00 [INF] Hosting environment: Development
2025-05-02 18:44:02.038 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 18:44:03.255 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 18:44:03.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 267.5107ms
2025-05-02 18:44:03.543 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 18:44:03.547 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 18:44:03.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.8015ms
2025-05-02 18:44:03.618 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.4079ms
2025-05-02 18:44:03.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-32x32.png - null null
2025-05-02 18:44:03.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 18:44:03.725 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-02 18:44:03.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-32x32.png - 499 628 image/png 74.973ms
2025-05-02 18:44:03.733 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.4818ms
2025-05-02 18:44:22.106 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 18:44:22.117 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:44:22.124 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 18:44:22.203 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:44:22.429 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 18:44:24.829 +03:00 [INF] Executed DbCommand (217ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 18:44:25.233 +03:00 [INF] Admin login successful for email: admin@gmail.com
2025-05-02 18:44:25.239 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:44:25.249 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 3030.0261ms
2025-05-02 18:44:25.252 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 18:44:25.261 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 3154.9728ms
2025-05-02 18:45:46.231 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:45:46.397 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 18:45:46.399 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 18:45:46.563 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:45:46.566 +03:00 [INF] Hosting environment: Development
2025-05-02 18:45:46.568 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 18:45:46.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 18:45:46.806 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 156.7229ms
2025-05-02 18:45:46.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 18:45:46.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 18:45:46.839 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.6496ms
2025-05-02 18:45:46.869 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.6405ms
2025-05-02 18:45:46.934 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 18:45:46.947 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.8662ms
2025-05-02 18:47:09.176 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:47:09.337 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 18:47:09.339 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 18:47:09.407 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:47:09.409 +03:00 [INF] Hosting environment: Development
2025-05-02 18:47:09.410 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 18:47:09.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 18:47:09.797 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 145.4682ms
2025-05-02 18:47:09.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 18:47:09.829 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.3088ms
2025-05-02 18:47:09.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 18:47:09.858 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.8289ms
2025-05-02 18:47:09.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 18:47:09.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.0364ms
2025-05-02 18:47:38.415 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 18:47:38.427 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:47:38.438 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 18:47:38.490 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:47:38.742 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 18:47:40.654 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 18:47:41.077 +03:00 [INF] Admin login successful for email: admin@gmail.com
2025-05-02 18:47:41.088 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:47:41.101 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 2601.3725ms
2025-05-02 18:47:41.103 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 18:47:41.111 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 2696.0196ms
2025-05-02 18:48:10.243 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-05-02 18:48:10.321 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 18:48:10.340 +03:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 18:48:10.367 +03:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 18:48:10.376 +03:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 18:48:10.540 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-05-02 18:48:10.673 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-02 18:48:10.679 +03:00 [INF] Successfully retrieved 1 doctors
2025-05-02 18:48:10.680 +03:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:48:10.691 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 348.1398ms
2025-05-02 18:48:10.692 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 18:48:10.692 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 449.5196ms
2025-05-02 18:50:03.649 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundaryec282c9f6532572148b153c496586054 1094
2025-05-02 18:50:03.661 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:50:03.666 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 18:50:03.684 +03:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:50:03.741 +03:00 [INF] RegisterDoctor called with email: aliahmed@gmail.com
2025-05-02 18:50:03.957 +03:00 [INF] Executed DbCommand (119ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:50:04.604 +03:00 [ERR] Failed executing DbCommand (227ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Age], [BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-02 18:50:05.010 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AuthApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 18:50:05.138 +03:00 [ERR] Error registering doctor with email aliahmed@gmail.com. StackTrace:    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterDoctor(DoctorDto doctorDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 291
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterDoctor(DoctorDto doctorDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 291
2025-05-02 18:50:05.148 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:50:05.162 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 1472.6442ms
2025-05-02 18:50:05.165 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 18:50:05.168 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 500 null application/json; charset=utf-8 1522.3671ms
2025-05-02 18:50:50.401 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary93be1a3f003bc7a8b267a656323e0e98 84943
2025-05-02 18:50:50.406 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:50:50.408 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 18:50:50.410 +03:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:50:50.472 +03:00 [INF] RegisterDoctor called with email: aliahmed@gmail.com
2025-05-02 18:50:50.564 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:50:50.986 +03:00 [ERR] Failed executing DbCommand (255ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Age], [BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-02 18:50:51.378 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AuthApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 18:50:51.481 +03:00 [ERR] Error registering doctor with email aliahmed@gmail.com. StackTrace:    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterDoctor(DoctorDto doctorDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 291
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterDoctor(DoctorDto doctorDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 291
2025-05-02 18:50:51.490 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:50:51.491 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 1078.6985ms
2025-05-02 18:50:51.493 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 18:50:51.498 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 500 null application/json; charset=utf-8 1097.1967ms
2025-05-02 18:51:37.297 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary2bd92cd0e070f00fabe6c078fab48e16 1551
2025-05-02 18:51:37.303 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:51:37.305 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 18:51:37.314 +03:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:51:37.336 +03:00 [INF] RegisterPatient called with email: alikhaled@gmail.com
2025-05-02 18:51:37.531 +03:00 [ERR] Failed executing DbCommand (179ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-05-02 18:51:37.676 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AuthApi.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
2025-05-02 18:51:37.908 +03:00 [ERR] Error registering patient with email alikhaled@gmail.com. StackTrace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterPatient(PatientDto patientDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 350
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterPatient(PatientDto patientDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 350
ClientConnectionId:a9547c2c-27cc-448d-9bbc-cd62f1309348
Error Number:207,State:1,Class:16
2025-05-02 18:51:37.921 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:51:37.923 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 606.3033ms
2025-05-02 18:51:37.933 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 18:51:37.935 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 500 null application/json; charset=utf-8 638.2931ms
2025-05-02 18:52:49.828 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:52:49.956 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:52:50.036 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:52:50.120 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:52:50.224 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:52:50.236 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 18:52:55.529 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:52:55.687 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 18:52:55.690 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 18:52:55.747 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:52:55.749 +03:00 [INF] Hosting environment: Development
2025-05-02 18:52:55.752 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 18:52:56.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 18:52:56.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 149.9059ms
2025-05-02 18:52:56.500 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 18:52:56.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 18:52:56.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 8.8449ms
2025-05-02 18:52:56.544 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.6581ms
2025-05-02 18:52:56.629 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 18:52:56.642 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.4841ms
2025-05-02 18:53:43.318 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary38028099a84de98a6db94c2c3a2a20f 1530
2025-05-02 18:53:43.346 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:53:43.370 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 18:53:43.402 +03:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:53:43.613 +03:00 [INF] RegisterPatient called with email: ali@gmail.com
2025-05-02 18:53:45.490 +03:00 [ERR] Failed executing DbCommand (271ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-05-02 18:53:45.733 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AuthApi.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2da16b35-6a37-4181-a93b-9df496037c41
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2da16b35-6a37-4181-a93b-9df496037c41
Error Number:207,State:1,Class:16
2025-05-02 18:53:45.866 +03:00 [ERR] Error registering patient with email ali@gmail.com. StackTrace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterPatient(PatientDto patientDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 350
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterPatient(PatientDto patientDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 350
ClientConnectionId:2da16b35-6a37-4181-a93b-9df496037c41
Error Number:207,State:1,Class:16
2025-05-02 18:53:45.882 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:53:45.893 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 2485.0873ms
2025-05-02 18:53:45.895 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 18:53:45.907 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 500 null application/json; charset=utf-8 2589.2405ms
2025-05-02 18:55:05.440 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary86f1b62312b3e3cbff0d6c009375ede 1085
2025-05-02 18:55:05.449 +03:00 [INF] CORS policy execution successful.
2025-05-02 18:55:05.452 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 18:55:05.463 +03:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 18:55:05.483 +03:00 [INF] RegisterDoctor called with email: aliahmed@gmail.com
2025-05-02 18:55:05.656 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:55:06.443 +03:00 [ERR] Failed executing DbCommand (287ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Age], [BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-02 18:55:06.818 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AuthApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2da16b35-6a37-4181-a93b-9df496037c41
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2da16b35-6a37-4181-a93b-9df496037c41
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 18:55:06.963 +03:00 [ERR] Error registering doctor with email aliahmed@gmail.com. StackTrace:    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterDoctor(DoctorDto doctorDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 291
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Age'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2da16b35-6a37-4181-a93b-9df496037c41
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthApi.Controllers.AuthController.RegisterDoctor(DoctorDto doctorDto) in E:\Course\login .net\AuthApi\AuthApi\Controllers\AuthController.cs:line 291
2025-05-02 18:55:06.985 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 18:55:06.986 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 1520.2869ms
2025-05-02 18:55:06.988 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 18:55:06.989 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 500 null application/json; charset=utf-8 1549.1936ms
2025-05-02 18:55:56.499 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:55:56.652 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 18:55:56.654 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 18:55:56.717 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:55:56.718 +03:00 [INF] Hosting environment: Development
2025-05-02 18:55:56.743 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 18:55:57.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 18:55:57.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 154.0931ms
2025-05-02 18:55:57.285 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 18:55:57.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 18:55:57.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.6885ms
2025-05-02 18:55:57.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.0167ms
2025-05-02 18:55:57.384 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 18:55:57.394 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.3537ms
2025-05-02 19:01:48.374 +03:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:01:48.490 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:01:48.578 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:01:48.657 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:01:48.752 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 19:01:48.761 +03:00 [INF] Applying migration '20250502160135_InitialCreate'.
2025-05-02 19:01:48.961 +03:00 [ERR] Failed executing DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Admins] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Admins] PRIMARY KEY ([Id])
);
2025-05-02 19:02:30.250 +03:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:02:30.460 +03:00 [INF] Executed DbCommand (185ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:02:30.540 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:02:30.667 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-05-02 19:02:30.748 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:02:30.833 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:02:30.922 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 19:02:30.938 +03:00 [INF] Applying migration '20250502160135_InitialCreate'.
2025-05-02 19:02:31.136 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Admins] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Admins] PRIMARY KEY ([Id])
);
2025-05-02 19:02:31.227 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [Id] int NOT NULL IDENTITY,
    [FirstName] nvarchar(max) NOT NULL,
    [LastName] nvarchar(max) NOT NULL,
    [Gender] nvarchar(max) NOT NULL,
    [BirthDate] datetime2 NULL,
    [Age] int NOT NULL,
    [Specialty] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [ImageUrl] nvarchar(max) NULL,
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([Id])
);
2025-05-02 19:02:31.471 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [Id] int NOT NULL IDENTITY,
    [FirstName] nvarchar(max) NOT NULL,
    [LastName] nvarchar(max) NOT NULL,
    [Gender] nvarchar(max) NOT NULL,
    [BirthDate] datetime2 NULL,
    [Age] int NOT NULL,
    [BloodType] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [ImageUrl] nvarchar(max) NULL,
    [XRayImageUrl] nvarchar(max) NULL,
    [LabResultsImageUrl] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Patients] PRIMARY KEY ([Id])
);
2025-05-02 19:02:31.560 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PatientHistories] (
    [Id] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [Diagnosis] nvarchar(max) NOT NULL,
    [Treatment] nvarchar(max) NOT NULL,
    [TreatmentDate] datetime2 NOT NULL,
    CONSTRAINT [PK_PatientHistories] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientHistories_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_PatientHistories_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:02:33.592 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientHistories_DoctorId] ON [PatientHistories] ([DoctorId]);
2025-05-02 19:02:33.676 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientHistories_PatientId] ON [PatientHistories] ([PatientId]);
2025-05-02 19:02:33.762 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502160135_InitialCreate', N'8.0.0');
2025-05-02 19:02:48.367 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 19:02:48.524 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 19:02:48.526 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 19:02:48.588 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 19:02:48.590 +03:00 [INF] Hosting environment: Development
2025-05-02 19:02:48.591 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 19:02:48.926 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 19:02:49.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 169.1431ms
2025-05-02 19:02:49.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 19:02:49.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 19:02:49.129 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 12.9525ms
2025-05-02 19:02:49.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.9744ms
2025-05-02 19:02:49.168 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - null null
2025-05-02 19:02:49.176 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-05-02 19:02:49.176 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - 200 665 image/png 8.2343ms
2025-05-02 19:02:49.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 19:02:49.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.9313ms
2025-05-02 19:03:33.510 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary23c0fcd9b474af409e58982504a60314 1090
2025-05-02 19:03:33.521 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:03:33.524 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 19:03:33.542 +03:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:03:33.670 +03:00 [INF] RegisterDoctor called with email: ali@gmail.com
2025-05-02 19:03:34.892 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:03:35.286 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Age], [BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-02 19:03:35.313 +03:00 [INF] No image provided for doctor with ID 1
2025-05-02 19:03:35.316 +03:00 [INF] Doctor registered successfully with ID: 1
2025-05-02 19:03:35.320 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:03:35.331 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 1782.0057ms
2025-05-02 19:03:35.332 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 19:03:35.340 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 200 null application/json; charset=utf-8 1829.4459ms
2025-05-02 19:04:15.103 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundaryc6363269492402af23e77c37e78bac10 1552
2025-05-02 19:04:15.111 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:04:15.112 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:04:15.116 +03:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:04:15.126 +03:00 [INF] RegisterPatient called with email: omarahemd@gmail.com
2025-05-02 19:04:15.258 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-05-02 19:04:15.268 +03:00 [WRN] Doctor not found with ID: 6
2025-05-02 19:04:15.270 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:04:15.272 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 153.3438ms
2025-05-02 19:04:15.273 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:04:15.273 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 400 null application/json; charset=utf-8 171.0172ms
2025-05-02 19:04:19.403 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundarybfcfe0de21b922fd9c9973ce8550cccc 1552
2025-05-02 19:04:19.405 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:04:19.406 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:04:19.407 +03:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:04:19.412 +03:00 [INF] RegisterPatient called with email: omarahemd@gmail.com
2025-05-02 19:04:19.545 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-05-02 19:04:19.666 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Age], [p].[BirthDate], [p].[BloodType], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LabResultsImageUrl], [p].[LastName], [p].[PasswordHash], [p].[XRayImageUrl]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-05-02 19:04:19.862 +03:00 [INF] Attempting to save patient with email: omarahemd@gmail.com
2025-05-02 19:04:20.587 +03:00 [INF] Executed DbCommand (606ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([Age], [BirthDate], [BloodType], [CreatedAt], [Email], [FirstName], [Gender], [ImageUrl], [LabResultsImageUrl], [LastName], [PasswordHash], [XRayImageUrl])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-05-02 19:04:20.694 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p12, @p13, @p14, @p15, @p16);
2025-05-02 19:04:20.819 +03:00 [INF] No image provided for patient with ID 1
2025-05-02 19:04:20.822 +03:00 [INF] No image provided for patient-xray with ID 1
2025-05-02 19:04:20.825 +03:00 [INF] No image provided for patient-lab with ID 1
2025-05-02 19:04:20.829 +03:00 [INF] Patient registered successfully with ID: 1
2025-05-02 19:04:20.830 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:04:20.835 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 1426.9357ms
2025-05-02 19:04:20.837 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:04:20.837 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 1434.443ms
2025-05-02 19:05:36.720 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7295/api/Update/doctor/1 - multipart/form-data; boundary=----geckoformboundary900f4308b0ec8c113859133381f8bac3 1095
2025-05-02 19:05:36.723 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:05:36.727 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-05-02 19:05:36.730 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-02 19:05:36.731 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7295/api/Update/doctor/1 - 401 0 null 11.6303ms
2025-05-02 19:05:54.830 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 19:05:54.833 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:05:54.834 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:05:54.837 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:05:54.852 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 19:05:54.942 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 19:05:55.041 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-05-02 19:05:55.143 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Age], [p].[BirthDate], [p].[BloodType], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LabResultsImageUrl], [p].[LastName], [p].[PasswordHash], [p].[XRayImageUrl]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-05-02 19:05:55.150 +03:00 [WRN] Invalid login attempt for email: admin@gmail.com
2025-05-02 19:05:55.150 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:05:55.151 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 312.1043ms
2025-05-02 19:05:55.154 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:05:55.154 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 324.1318ms
2025-05-02 19:06:03.104 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/admin/register - application/json 53
2025-05-02 19:06:03.106 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:06:03.107 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterAdmin (AuthApi)'
2025-05-02 19:06:03.109 +03:00 [INF] Route matched with {action = "RegisterAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAdmin(AuthApi.DTOs.AdminDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:06:03.115 +03:00 [INF] RegisterAdmin called with email: admin@gmail.com
2025-05-02 19:06:03.209 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__adminDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Admins] AS [a]
        WHERE [a].[Email] = @__adminDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:06:03.320 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Admins] AS [a]
2025-05-02 19:06:03.542 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Admins] ([Email], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-05-02 19:06:03.548 +03:00 [INF] Admin registered successfully with ID: 1
2025-05-02 19:06:03.549 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.AdminResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:06:03.551 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterAdmin (AuthApi) in 440.8975ms
2025-05-02 19:06:03.553 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterAdmin (AuthApi)'
2025-05-02 19:06:03.554 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/admin/register - 200 null application/json; charset=utf-8 450.2076ms
2025-05-02 19:06:14.456 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 19:06:14.457 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:06:14.458 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:06:14.459 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:06:14.461 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 19:06:14.561 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 19:06:14.701 +03:00 [INF] Admin login successful for email: admin@gmail.com
2025-05-02 19:06:14.702 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:06:14.722 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 261.7952ms
2025-05-02 19:06:14.723 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:06:14.742 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 286.4567ms
2025-05-02 19:06:32.406 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7295/api/Update/doctor/1 - multipart/form-data; boundary=----geckoformboundarycfc59d5b9865125c2e09d89b2496f2 1075
2025-05-02 19:06:32.408 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:06:32.428 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UpdateController.UpdateDoctor (AuthApi)'
2025-05-02 19:06:32.433 +03:00 [INF] Route matched with {action = "UpdateDoctor", controller = "Update"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDoctor(Int32, AuthApi.DTOs.UpdateDoctorDto) on controller AuthApi.Controllers.UpdateController (AuthApi).
2025-05-02 19:06:32.440 +03:00 [INF] UpdateDoctor called for doctor ID 1
2025-05-02 19:06:32.538 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__p_0
2025-05-02 19:06:32.630 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__updateDoctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__updateDoctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:06:32.843 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Doctors] SET [BirthDate] = @p0, [Email] = @p1, [FirstName] = @p2, [Gender] = @p3, [LastName] = @p4, [PasswordHash] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-05-02 19:06:32.849 +03:00 [INF] Doctor updated successfully for ID 1
2025-05-02 19:06:32.849 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:06:32.850 +03:00 [INF] Executed action AuthApi.Controllers.UpdateController.UpdateDoctor (AuthApi) in 415.4772ms
2025-05-02 19:06:32.851 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UpdateController.UpdateDoctor (AuthApi)'
2025-05-02 19:06:32.853 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7295/api/Update/doctor/1 - 200 null application/json; charset=utf-8 446.9099ms
2025-05-02 19:08:31.542 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 19:08:31.730 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 19:08:31.732 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 19:08:31.805 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 19:08:31.808 +03:00 [INF] Hosting environment: Development
2025-05-02 19:08:31.809 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 19:08:32.140 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 19:08:32.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 170.3276ms
2025-05-02 19:08:32.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 19:08:32.345 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 19:08:32.345 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.1847ms
2025-05-02 19:08:32.374 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.5241ms
2025-05-02 19:08:32.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - null null
2025-05-02 19:08:32.449 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-05-02 19:08:32.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - 499 665 image/png 54.0532ms
2025-05-02 19:08:32.458 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 19:08:32.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.8632ms
2025-05-02 19:08:53.862 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 19:08:53.871 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:08:53.874 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:08:53.891 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:08:54.014 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 19:08:55.368 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 19:08:55.622 +03:00 [INF] Admin login successful for email: admin@gmail.com
2025-05-02 19:08:55.626 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:08:55.633 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1739.4876ms
2025-05-02 19:08:55.634 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:08:55.639 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1777.6346ms
2025-05-02 19:09:58.585 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary7fd16bf2239f9611144aa8401eca762 1085
2025-05-02 19:09:58.588 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:09:58.615 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 19:09:58.621 +03:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:09:58.639 +03:00 [INF] RegisterDoctor called with email: aliaahmed@gmail.com
2025-05-02 19:09:58.652 +03:00 [WRN] Invalid specialty provided: cardoligy. Allowed specialties are: Cardiology, Neurology, Pediatrics, Orthopedics, Dermatology
2025-05-02 19:09:58.653 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:09:58.654 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 32.6825ms
2025-05-02 19:09:58.661 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 19:09:58.662 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 400 null application/json; charset=utf-8 77.4878ms
2025-05-02 19:10:08.070 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary3d375d3c602ec291fd3bf94dde3431b 1087
2025-05-02 19:10:08.071 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:10:08.072 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 19:10:08.073 +03:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:10:08.078 +03:00 [INF] RegisterDoctor called with email: aliaahmed@gmail.com
2025-05-02 19:10:08.202 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:10:08.567 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Age], [BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-02 19:10:08.592 +03:00 [INF] No image provided for doctor with ID 2
2025-05-02 19:10:08.595 +03:00 [INF] Doctor registered successfully with ID: 2
2025-05-02 19:10:08.596 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:10:08.602 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 528.8043ms
2025-05-02 19:10:08.603 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-05-02 19:10:08.604 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 200 null application/json; charset=utf-8 534.5799ms
2025-05-02 19:10:57.734 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundaryc3854a65f3e444692edfb297712f6c37 1562
2025-05-02 19:10:57.739 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:10:57.740 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:10:57.743 +03:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:10:57.751 +03:00 [INF] RegisterPatient called with email: omaressamtefa@gmail.com
2025-05-02 19:10:57.874 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-05-02 19:10:57.974 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Age], [p].[BirthDate], [p].[BloodType], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LabResultsImageUrl], [p].[LastName], [p].[PasswordHash], [p].[XRayImageUrl]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-05-02 19:10:58.114 +03:00 [INF] Attempting to save patient with email: omaressamtefa@gmail.com
2025-05-02 19:10:58.842 +03:00 [INF] Executed DbCommand (611ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([Age], [BirthDate], [BloodType], [CreatedAt], [Email], [FirstName], [Gender], [ImageUrl], [LabResultsImageUrl], [LastName], [PasswordHash], [XRayImageUrl])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-05-02 19:10:58.946 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p12, @p13, @p14, @p15, @p16);
2025-05-02 19:10:59.036 +03:00 [INF] No image provided for patient with ID 2
2025-05-02 19:10:59.038 +03:00 [INF] No image provided for patient-xray with ID 2
2025-05-02 19:10:59.040 +03:00 [INF] No image provided for patient-lab with ID 2
2025-05-02 19:10:59.043 +03:00 [INF] Patient registered successfully with ID: 2
2025-05-02 19:10:59.044 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:10:59.049 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 1304.8182ms
2025-05-02 19:10:59.055 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:10:59.056 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 1324.036ms
2025-05-02 19:11:13.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-05-02 19:11:13.967 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 19:11:13.971 +03:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 19:11:13.977 +03:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:11:13.981 +03:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:11:14.105 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-05-02 19:11:14.204 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-02 19:11:14.214 +03:00 [INF] Successfully retrieved 2 doctors
2025-05-02 19:11:14.215 +03:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:11:14.217 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 245.4887ms
2025-05-02 19:11:14.219 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 19:11:14.220 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 257.1604ms
2025-05-02 19:11:25.512 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - null null
2025-05-02 19:11:25.515 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-05-02 19:11:25.518 +03:00 [INF] Route matched with {action = "GetAllPatients", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 19:11:25.522 +03:00 [INF] GetAllPatients called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:11:25.526 +03:00 [INF] Fetching all patients with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:11:25.617 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2025-05-02 19:11:26.306 +03:00 [INF] Executed DbCommand (625ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    ORDER BY [p].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p0].[Diagnosis], [p0].[Treatment], [p0].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p0].[Id], [d].[Id] AS [Id0], [p0].[PatientId]
    FROM [PatientHistories] AS [p0]
    INNER JOIN [Doctors] AS [d] ON [p0].[DoctorId] = [d].[Id]
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-05-02 19:11:26.315 +03:00 [INF] Successfully retrieved 2 patients
2025-05-02 19:11:26.316 +03:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:11:26.317 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllPatients (AuthApi) in 798.6856ms
2025-05-02 19:11:26.318 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-05-02 19:11:26.319 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 806.3889ms
2025-05-02 19:11:40.929 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-05-02 19:11:40.931 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-05-02 19:11:40.934 +03:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 19:11:40.938 +03:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:11:40.943 +03:00 [INF] Fetching patients for doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:11:41.034 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:11:41.138 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-05-02 19:11:41.792 +03:00 [INF] Executed DbCommand (643ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-05-02 19:11:41.795 +03:00 [INF] Successfully retrieved 2 patients for doctorId: 1
2025-05-02 19:11:41.796 +03:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:11:41.796 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 861.7879ms
2025-05-02 19:11:41.797 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-05-02 19:11:41.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 869.2818ms
2025-05-02 19:11:57.514 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/details - null null
2025-05-02 19:11:57.516 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-05-02 19:11:57.518 +03:00 [INF] Route matched with {action = "GetMyDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyDetails() on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 19:11:57.521 +03:00 [INF] GetMyDetails called for logged-in user
2025-05-02 19:11:57.524 +03:00 [INF] Fetching user details for userId: 1, role: admin
2025-05-02 19:11:57.617 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email]
FROM [Admins] AS [a]
WHERE [a].[Id] = @__userId_0
2025-05-02 19:11:57.619 +03:00 [INF] Successfully retrieved details for userId: 1, role: admin
2025-05-02 19:11:57.620 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:11:57.622 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetMyDetails (AuthApi) in 103.2271ms
2025-05-02 19:11:57.623 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-05-02 19:11:57.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/details - 200 null application/json; charset=utf-8 110.6402ms
2025-05-02 19:30:46.602 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 19:30:46.808 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 19:30:46.811 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 19:30:46.875 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 19:30:46.878 +03:00 [INF] Hosting environment: Development
2025-05-02 19:30:46.880 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 19:30:47.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 19:30:47.807 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 198.0262ms
2025-05-02 19:30:47.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 19:30:47.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 19:30:47.844 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.3809ms
2025-05-02 19:30:47.890 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.0381ms
2025-05-02 19:30:47.953 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 19:30:47.968 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.618ms
2025-05-02 19:31:01.929 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 53
2025-05-02 19:31:01.935 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:31:01.939 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:31:01.957 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:31:02.119 +03:00 [INF] Login attempt for email: admin@gmail.com
2025-05-02 19:31:03.694 +03:00 [INF] Executed DbCommand (134ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-05-02 19:31:03.936 +03:00 [INF] Admin login successful for email: admin@gmail.com
2025-05-02 19:31:03.942 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-02 19:31:03.949 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1987.3431ms
2025-05-02 19:31:03.951 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-05-02 19:31:03.956 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 2027.0258ms
2025-05-02 19:31:20.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-05-02 19:31:20.524 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 19:31:20.528 +03:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-05-02 19:31:20.537 +03:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:31:20.541 +03:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-05-02 19:31:20.663 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-05-02 19:31:20.763 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-02 19:31:20.769 +03:00 [INF] Successfully retrieved 2 doctors
2025-05-02 19:31:20.770 +03:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:31:20.777 +03:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 246.5884ms
2025-05-02 19:31:20.780 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-05-02 19:31:20.783 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 288.9403ms
2025-05-02 19:38:38.887 +03:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 19:38:39.071 +03:00 [INF] Now listening on: https://localhost:7295
2025-05-02 19:38:39.073 +03:00 [INF] Now listening on: http://localhost:5024
2025-05-02 19:38:39.200 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 19:38:39.202 +03:00 [INF] Hosting environment: Development
2025-05-02 19:38:39.203 +03:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-05-02 19:38:39.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-05-02 19:38:40.013 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 178.1003ms
2025-05-02 19:38:40.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 19:38:40.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-05-02 19:38:40.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.5302ms
2025-05-02 19:38:40.083 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.4547ms
2025-05-02 19:38:40.165 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-05-02 19:38:40.177 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.7071ms
2025-05-02 19:43:15.497 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundaryc41e6ed4567743d23e7b09fcefa0d874 1548
2025-05-02 19:43:15.506 +03:00 [INF] CORS policy execution successful.
2025-05-02 19:43:15.512 +03:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:43:15.553 +03:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-05-02 19:43:15.742 +03:00 [INF] RegisterPatient called with email: sara@gmail.com
2025-05-02 19:43:17.307 +03:00 [INF] Executed DbCommand (256ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Age], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-05-02 19:43:17.474 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Age], [p].[BirthDate], [p].[BloodType], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LabResultsImageUrl], [p].[LastName], [p].[PasswordHash], [p].[XRayImageUrl]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-05-02 19:43:17.708 +03:00 [INF] Attempting to save patient with email: sara@gmail.com
2025-05-02 19:43:18.516 +03:00 [INF] Executed DbCommand (606ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([Age], [BirthDate], [BloodType], [CreatedAt], [Email], [FirstName], [Gender], [ImageUrl], [LabResultsImageUrl], [LastName], [PasswordHash], [XRayImageUrl])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-05-02 19:43:18.635 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p12, @p13, @p14, @p15, @p16);
2025-05-02 19:43:18.784 +03:00 [INF] No image provided for patient with ID 3
2025-05-02 19:43:18.796 +03:00 [INF] No image provided for patient-xray with ID 3
2025-05-02 19:43:18.807 +03:00 [INF] No image provided for patient-lab with ID 3
2025-05-02 19:43:18.815 +03:00 [INF] Patient registered successfully with ID: 3
2025-05-02 19:43:18.835 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:43:18.851 +03:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 3293.2354ms
2025-05-02 19:43:18.875 +03:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-05-02 19:43:18.880 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 3383.6079ms
