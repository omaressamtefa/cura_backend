2025-04-09 01:37:05.432 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 01:37:05.555 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 01:37:05.888 +02:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5024: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-04-09 01:37:26.025 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 01:37:26.108 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 01:37:26.179 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 01:37:26.180 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 01:37:26.235 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 01:37:26.237 +02:00 [INF] Hosting environment: Development
2025-04-09 01:37:26.239 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 01:37:27.562 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 01:37:27.694 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 137.974ms
2025-04-09 01:37:27.730 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 01:37:27.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 5.4138ms
2025-04-09 01:37:27.760 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 01:37:27.922 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - null null
2025-04-09 01:37:27.981 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-04-09 01:37:27.984 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - 499 665 image/png 61.3656ms
2025-04-09 01:37:27.993 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 234.1754ms
2025-04-09 01:37:28.045 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 01:37:28.056 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.0181ms
2025-04-09 01:38:10.288 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 67
2025-04-09 01:38:10.382 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 01:38:10.423 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 01:38:10.731 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 01:38:12.479 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 01:38:12.534 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 01:38:12.961 +02:00 [INF] Doctor login successful for email: dontplaywithmeeh007@gmail.com
2025-04-09 01:38:12.975 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 01:38:12.988 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 2559.2631ms
2025-04-09 01:38:12.991 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 01:38:13.000 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 2712.5179ms
2025-04-09 01:38:26.675 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 01:38:26.735 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 01:38:26.764 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 01:38:26.766 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 01:38:26.880 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 01:38:26.881 +02:00 [INF] Hosting environment: Development
2025-04-09 01:38:26.881 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 01:38:27.425 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 01:38:27.505 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 80.7573ms
2025-04-09 01:38:27.531 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 01:38:27.532 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 01:38:27.537 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.5584ms
2025-04-09 01:38:27.554 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.0292ms
2025-04-09 01:38:27.648 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 01:38:27.660 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.9247ms
2025-04-09 01:40:10.222 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 01:40:10.312 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 01:40:10.385 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 01:40:10.387 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 01:40:10.453 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 01:40:10.457 +02:00 [INF] Hosting environment: Development
2025-04-09 01:40:10.459 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 01:40:11.117 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 01:40:11.249 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 136.5234ms
2025-04-09 01:40:11.276 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 01:40:11.277 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 01:40:11.281 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 5.9254ms
2025-04-09 01:40:11.309 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4617ms
2025-04-09 01:40:11.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - null null
2025-04-09 01:40:11.402 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-04-09 01:40:11.404 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - 499 665 image/png 67.0212ms
2025-04-09 01:40:11.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 01:40:11.445 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.6587ms
2025-04-09 01:40:28.448 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - application/json 46
2025-04-09 01:40:28.500 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 01:40:28.518 +02:00 [INF] Route matched with {action = "RequestPasswordReset", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RequestPasswordReset(AuthApi.DTOs.PasswordResetRequestDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 01:40:28.683 +02:00 [INF] RequestPasswordReset called for email: dontplaywithmeeh007@gmail.com
2025-04-09 01:40:29.479 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__requestDto_Email_0
2025-04-09 01:40:29.567 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__requestDto_Email_0
2025-04-09 01:40:29.667 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__requestDto_Email_0
2025-04-09 01:40:32.447 +02:00 [INF] Email sent successfully to dontplaywithmeeh007@gmail.com
2025-04-09 01:40:32.477 +02:00 [INF] Password reset code sent to email: dontplaywithmeeh007@gmail.com
2025-04-09 01:40:32.496 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 01:40:32.515 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi) in 3989.348ms
2025-04-09 01:40:32.516 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 01:40:32.521 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - 200 null application/json; charset=utf-8 4073.8428ms
2025-04-09 01:55:26.459 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 01:55:26.555 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 01:55:26.630 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 01:55:26.633 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 01:55:26.702 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 01:55:26.704 +02:00 [INF] Hosting environment: Development
2025-04-09 01:55:26.705 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 01:55:27.277 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 01:55:27.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 124.3399ms
2025-04-09 01:55:27.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 01:55:27.433 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 01:55:27.434 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.2463ms
2025-04-09 01:55:27.470 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.7223ms
2025-04-09 01:55:27.568 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 01:55:27.583 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.1509ms
2025-04-09 01:55:40.761 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - application/json 46
2025-04-09 01:55:40.811 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 01:55:40.829 +02:00 [INF] Route matched with {action = "RequestPasswordReset", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RequestPasswordReset(AuthApi.DTOs.PasswordResetRequestDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 01:55:40.968 +02:00 [INF] RequestPasswordReset called for email: dontplaywithmeeh007@gmail.com
2025-04-09 01:55:41.667 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__requestDto_Email_0
2025-04-09 01:55:41.697 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__requestDto_Email_0
2025-04-09 01:55:41.746 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__requestDto_Email_0
2025-04-09 01:55:43.392 +02:00 [INF] Email sent successfully to dontplaywithmeeh007@gmail.com
2025-04-09 01:55:43.397 +02:00 [INF] Password reset code sent to email: dontplaywithmeeh007@gmail.com
2025-04-09 01:55:43.407 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 01:55:43.417 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi) in 2583.7862ms
2025-04-09 01:55:43.420 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 01:55:43.432 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - 200 null application/json; charset=utf-8 2671.4198ms
2025-04-09 01:58:56.864 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 01:58:56.976 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 01:58:57.073 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 01:58:57.075 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 01:58:57.136 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 01:58:57.138 +02:00 [INF] Hosting environment: Development
2025-04-09 01:58:57.140 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 01:58:57.666 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 01:58:57.790 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 128.8811ms
2025-04-09 01:58:57.820 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 01:58:57.824 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 01:58:57.829 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 9.4635ms
2025-04-09 01:58:57.856 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4349ms
2025-04-09 01:58:57.889 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - null null
2025-04-09 01:58:57.941 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-04-09 01:58:57.942 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - 499 665 image/png 54.0511ms
2025-04-09 01:58:57.957 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 01:58:57.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.3668ms
2025-04-09 01:59:08.267 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - application/json 46
2025-04-09 01:59:08.346 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 01:59:08.378 +02:00 [INF] Route matched with {action = "RequestPasswordReset", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RequestPasswordReset(AuthApi.DTOs.PasswordResetRequestDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 01:59:08.567 +02:00 [INF] RequestPasswordReset called for email: dontplaywithmeeh007@gmail.com
2025-04-09 01:59:09.662 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__requestDto_Email_0
2025-04-09 01:59:09.703 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__requestDto_Email_0
2025-04-09 01:59:09.779 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__requestDto_Email_0
2025-04-09 01:59:12.787 +02:00 [INF] Email sent successfully to dontplaywithmeeh007@gmail.com
2025-04-09 01:59:12.792 +02:00 [INF] Password reset code sent to email: dontplaywithmeeh007@gmail.com
2025-04-09 01:59:12.797 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 01:59:12.809 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi) in 4425.8043ms
2025-04-09 01:59:12.811 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 01:59:12.820 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - 200 null application/json; charset=utf-8 4553.2023ms
2025-04-09 02:00:40.543 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:00:40.632 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:00:40.701 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:00:40.703 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:00:40.761 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:00:40.763 +02:00 [INF] Hosting environment: Development
2025-04-09 02:00:40.764 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:00:41.820 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:00:41.934 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 119.1415ms
2025-04-09 02:00:41.964 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:00:41.968 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:00:41.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 5.6321ms
2025-04-09 02:00:42.000 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.8726ms
2025-04-09 02:00:42.092 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:00:42.108 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.4998ms
2025-04-09 02:00:52.495 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - application/json 46
2025-04-09 02:00:52.542 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 02:00:52.558 +02:00 [INF] Route matched with {action = "RequestPasswordReset", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RequestPasswordReset(AuthApi.DTOs.PasswordResetRequestDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:00:52.682 +02:00 [INF] RequestPasswordReset called for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:00:53.404 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__requestDto_Email_0
2025-04-09 02:00:53.435 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__requestDto_Email_0
2025-04-09 02:00:53.477 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__requestDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__requestDto_Email_0
2025-04-09 02:00:56.436 +02:00 [INF] Email sent successfully to dontplaywithmeeh007@gmail.com
2025-04-09 02:00:56.439 +02:00 [INF] Password reset code sent to email: dontplaywithmeeh007@gmail.com
2025-04-09 02:00:56.446 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:00:56.453 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi) in 3890.6141ms
2025-04-09 02:00:56.454 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RequestPasswordReset (AuthApi)'
2025-04-09 02:00:56.459 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/request-password-reset - 200 null application/json; charset=utf-8 3965.0957ms
2025-04-09 02:05:28.402 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:05:28.497 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:05:28.580 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:05:28.584 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:05:28.660 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:05:28.663 +02:00 [INF] Hosting environment: Development
2025-04-09 02:05:28.665 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:05:29.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:05:29.204 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 155.6601ms
2025-04-09 02:05:29.236 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:05:29.238 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:05:29.243 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.8369ms
2025-04-09 02:05:29.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.0771ms
2025-04-09 02:05:29.291 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - null null
2025-04-09 02:05:29.345 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-04-09 02:05:29.347 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-16x16.png - 499 665 image/png 55.8577ms
2025-04-09 02:05:29.365 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:05:29.375 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.1044ms
2025-04-09 02:05:36.092 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 67
2025-04-09 02:05:36.173 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:05:36.191 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:05:36.331 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:05:37.099 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:05:37.130 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:05:37.401 +02:00 [INF] Doctor login successful for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:05:37.405 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:05:37.413 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1217.871ms
2025-04-09 02:05:37.415 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:05:37.423 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1330.487ms
2025-04-09 02:05:47.250 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:05:47.260 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 10.119ms
2025-04-09 02:05:47.280 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:05:47.283 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:05:47.283 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 3.1911ms
2025-04-09 02:05:47.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.4432ms
2025-04-09 02:05:47.382 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:05:47.389 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.3066ms
2025-04-09 02:07:20.169 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:07:20.263 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:07:20.345 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:07:20.347 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:07:20.412 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:07:20.414 +02:00 [INF] Hosting environment: Development
2025-04-09 02:07:20.416 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:07:21.359 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:07:21.471 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 116.6418ms
2025-04-09 02:07:21.498 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/swagger-ui.css - null null
2025-04-09 02:07:21.498 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:07:21.501 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:07:21.526 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 28.4436ms
2025-04-09 02:07:21.544 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-09 02:07:21.545 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/swagger-ui.css - 499 144929 text/css 47.0419ms
2025-04-09 02:07:21.561 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.3791ms
2025-04-09 02:07:21.628 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:07:21.639 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.6063ms
2025-04-09 02:07:40.771 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 66
2025-04-09 02:07:40.869 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:07:40.895 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:07:41.101 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:07:42.388 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:07:42.434 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:07:42.810 +02:00 [WRN] Invalid password for doctor with email: dontplaywithmeeh007@gmail.com
2025-04-09 02:07:42.819 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:07:42.830 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1927.9034ms
2025-04-09 02:07:42.833 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:07:42.841 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 2070.6867ms
2025-04-09 02:07:47.691 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 67
2025-04-09 02:07:47.698 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:07:47.700 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:07:47.708 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:07:47.764 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:07:47.772 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:07:48.096 +02:00 [INF] Doctor login successful for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:07:48.098 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:07:48.103 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 400.1484ms
2025-04-09 02:07:48.105 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:07:48.110 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 419.4336ms
2025-04-09 02:08:29.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:08:29.762 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:29.773 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:08:29.890 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 114.7385ms
2025-04-09 02:08:29.931 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:30.078 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method79(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:08:30.086 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 412.6162ms
2025-04-09 02:08:40.471 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:08:40.480 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:40.482 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:08:40.574 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 88.8905ms
2025-04-09 02:08:40.611 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:40.702 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method79(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:08:40.707 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 236.6913ms
2025-04-09 02:08:43.007 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:08:43.015 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:43.017 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:08:43.101 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 82.1478ms
2025-04-09 02:08:43.154 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:43.261 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method79(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:08:43.267 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 260.6454ms
2025-04-09 02:08:45.873 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:08:45.878 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:45.880 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:08:45.954 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 69.2545ms
2025-04-09 02:08:45.990 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:08:46.096 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method79(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:08:46.102 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 230.1065ms
2025-04-09 02:08:57.357 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:08:57.361 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:08:57.363 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:08:57.371 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:08:57.479 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:08:57.667 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:08:57.669 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:08:57.670 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 305.4049ms
2025-04-09 02:08:57.671 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:08:57.673 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 316.1053ms
2025-04-09 02:09:17.032 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:09:17.040 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:09:17.051 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:09:17.107 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 50.7312ms
2025-04-09 02:09:17.170 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:09:17.271 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method106(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:09:17.276 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 247.5086ms
2025-04-09 02:10:00.957 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/details - null null
2025-04-09 02:10:00.967 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:10:00.973 +02:00 [INF] Route matched with {action = "GetMyDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyDetails() on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:10:01.071 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetMyDetails (AuthApi) in 95.024ms
2025-04-09 02:10:01.116 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:10:01.224 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method114(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:10:01.229 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/details - 500 null text/plain; charset=utf-8 272.408ms
2025-04-09 02:16:01.023 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:16:01.108 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:16:01.176 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:16:01.178 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:16:01.238 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:16:01.240 +02:00 [INF] Hosting environment: Development
2025-04-09 02:16:01.241 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:16:02.065 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:16:02.178 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 117.3963ms
2025-04-09 02:16:02.209 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:16:02.216 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 7.2983ms
2025-04-09 02:16:02.218 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:16:02.253 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4843ms
2025-04-09 02:16:02.355 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:16:02.366 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.1136ms
2025-04-09 02:16:15.111 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 43
2025-04-09 02:16:15.209 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:15.248 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:16:15.426 +02:00 [INF] Login attempt for email: omar@
2025-04-09 02:16:16.944 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:16:17.015 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:16:17.030 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 02:16:17.046 +02:00 [WRN] Invalid login attempt for email: omar@
2025-04-09 02:16:17.055 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:16:17.072 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1810.231ms
2025-04-09 02:16:17.080 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:17.088 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 1976.9399ms
2025-04-09 02:16:24.499 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 48
2025-04-09 02:16:24.507 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:24.509 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:16:24.518 +02:00 [INF] Login attempt for email: omaressam@
2025-04-09 02:16:24.572 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:16:24.582 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:16:24.586 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 02:16:24.593 +02:00 [WRN] Invalid login attempt for email: omaressam@
2025-04-09 02:16:24.594 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:16:24.596 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 83.6927ms
2025-04-09 02:16:24.597 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:24.598 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 99.1804ms
2025-04-09 02:16:33.153 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:16:33.158 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:33.159 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:16:33.168 +02:00 [INF] Login attempt for email: omaressamtefa@
2025-04-09 02:16:33.278 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:16:33.285 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:16:33.292 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 02:16:33.298 +02:00 [WRN] Invalid login attempt for email: omaressamtefa@
2025-04-09 02:16:33.300 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:16:33.302 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 139.9459ms
2025-04-09 02:16:33.304 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:33.306 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 153.031ms
2025-04-09 02:16:41.802 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 61
2025-04-09 02:16:41.804 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:41.805 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:16:41.811 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:16:41.818 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:16:41.826 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:16:42.217 +02:00 [WRN] Invalid password for doctor with email: omaressamtefa@gmail.com
2025-04-09 02:16:42.218 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:16:42.219 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 411.2803ms
2025-04-09 02:16:42.220 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:42.222 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 420.1707ms
2025-04-09 02:16:43.263 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 61
2025-04-09 02:16:43.267 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:43.268 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:16:43.273 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:16:43.278 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:16:43.286 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:16:43.538 +02:00 [WRN] Invalid password for doctor with email: omaressamtefa@gmail.com
2025-04-09 02:16:43.539 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:16:43.541 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 270.9957ms
2025-04-09 02:16:43.542 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:43.543 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 280.1349ms
2025-04-09 02:16:53.093 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 62
2025-04-09 02:16:53.095 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:53.096 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:16:53.100 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:16:53.108 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:16:53.112 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:16:53.345 +02:00 [INF] Doctor login successful for email: omaressamtefa@gmail.com
2025-04-09 02:16:53.347 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:16:53.351 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 253.0952ms
2025-04-09 02:16:53.354 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:16:53.355 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 262.4664ms
2025-04-09 02:17:17.264 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:17:17.266 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:17:17.267 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:17:17.271 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:17:17.277 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:17:17.405 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:17:17.406 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:17:17.407 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 137.9697ms
2025-04-09 02:17:17.413 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:17:17.414 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 149.7709ms
2025-04-09 02:17:33.712 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:17:33.748 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:17:33.752 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:17:33.820 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 66.319ms
2025-04-09 02:17:33.843 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:17:33.929 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method100(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:17:33.935 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 222.9413ms
2025-04-09 02:17:56.527 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/details - null null
2025-04-09 02:17:56.532 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:17:56.534 +02:00 [INF] Route matched with {action = "GetMyDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyDetails() on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:17:56.616 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetMyDetails (AuthApi) in 80.2117ms
2025-04-09 02:17:56.651 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:17:56.711 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IUserService' while attempting to activate 'AuthApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method108(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:17:56.714 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/details - 500 null text/plain; charset=utf-8 187.3396ms
2025-04-09 02:18:20.427 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7295/api/Update/patient/1 - null null
2025-04-09 02:18:20.434 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UpdateController.DeletePatient (AuthApi)'
2025-04-09 02:18:20.438 +02:00 [INF] Route matched with {action = "DeletePatient", controller = "Update"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeletePatient(Int32) on controller AuthApi.Controllers.UpdateController (AuthApi).
2025-04-09 02:18:20.492 +02:00 [INF] Executed action AuthApi.Controllers.UpdateController.DeletePatient (AuthApi) in 52.2707ms
2025-04-09 02:18:20.528 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UpdateController.DeletePatient (AuthApi)'
2025-04-09 02:18:20.586 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IImageService' while attempting to activate 'AuthApi.Controllers.UpdateController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method116(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:18:20.589 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7295/api/Update/patient/1 - 500 null text/plain; charset=utf-8 162.1626ms
2025-04-09 02:18:29.917 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary680f49fa76046e683c658bddf5f59740 994
2025-04-09 02:18:29.920 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 02:18:29.943 +02:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:18:29.967 +02:00 [INF] RegisterDoctor called with email: string
2025-04-09 02:18:29.985 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:18:30.181 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 02:18:30.203 +02:00 [INF] No image provided for doctor with ID 5
2025-04-09 02:18:30.208 +02:00 [INF] Doctor registered successfully with ID: 5
2025-04-09 02:18:30.208 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:18:30.216 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 270.0885ms
2025-04-09 02:18:30.217 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 02:18:30.224 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 200 null application/json; charset=utf-8 306.9122ms
2025-04-09 02:19:48.587 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:19:48.679 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:19:48.778 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:19:48.780 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:19:48.838 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:19:48.840 +02:00 [INF] Hosting environment: Development
2025-04-09 02:19:48.841 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:19:49.993 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:19:50.101 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 112.1449ms
2025-04-09 02:19:50.128 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:19:50.129 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:19:50.137 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 8.3004ms
2025-04-09 02:19:50.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.7498ms
2025-04-09 02:19:50.254 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:19:50.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.0395ms
2025-04-09 02:20:00.525 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:20:00.637 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:20:00.673 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:20:00.879 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:20:02.199 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:20:02.671 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:20:02.683 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:20:02.697 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 2017.6369ms
2025-04-09 02:20:02.701 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:20:02.713 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 2187.8855ms
2025-04-09 02:20:22.683 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:20:22.766 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:20:22.776 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:20:22.787 +02:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:20:22.797 +02:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:20:22.915 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-04-09 02:20:22.973 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-04-09 02:20:22.985 +02:00 [INF] Successfully retrieved 5 doctors
2025-04-09 02:20:22.987 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:20:23.005 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 226.998ms
2025-04-09 02:20:23.009 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:20:23.011 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 328.2046ms
2025-04-09 02:20:37.194 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7295/api/Update/doctor/2 - null null
2025-04-09 02:20:37.201 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UpdateController.DeleteDoctor (AuthApi)'
2025-04-09 02:20:37.208 +02:00 [INF] Route matched with {action = "DeleteDoctor", controller = "Update"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDoctor(Int32) on controller AuthApi.Controllers.UpdateController (AuthApi).
2025-04-09 02:20:37.307 +02:00 [INF] Executed action AuthApi.Controllers.UpdateController.DeleteDoctor (AuthApi) in 97.2802ms
2025-04-09 02:20:37.349 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UpdateController.DeleteDoctor (AuthApi)'
2025-04-09 02:20:37.464 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AuthApi.Services.IImageService' while attempting to activate 'AuthApi.Controllers.UpdateController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method54(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-09 02:20:37.472 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7295/api/Update/doctor/2 - 500 null text/plain; charset=utf-8 277.9704ms
2025-04-09 02:21:33.033 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - null null
2025-04-09 02:21:33.040 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 02:21:33.045 +02:00 [INF] Route matched with {action = "GetAllPatients", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:21:33.052 +02:00 [INF] GetAllPatients called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:21:33.059 +02:00 [INF] Fetching all patients with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:21:33.145 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2025-04-09 02:21:33.260 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    ORDER BY [p].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p0].[Diagnosis], [p0].[Treatment], [p0].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p0].[Id], [d].[Id] AS [Id0], [p0].[PatientId]
    FROM [PatientHistories] AS [p0]
    INNER JOIN [Doctors] AS [d] ON [p0].[DoctorId] = [d].[Id]
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:21:33.273 +02:00 [INF] Successfully retrieved 1 patients
2025-04-09 02:21:33.275 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:21:33.286 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllPatients (AuthApi) in 238.4469ms
2025-04-09 02:21:33.293 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 02:21:33.295 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 288.7934ms
2025-04-09 02:22:19.577 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:22:19.587 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:22:19.611 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:22:19.614 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 403 0 null 41.4871ms
2025-04-09 02:22:23.644 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:22:23.647 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:22:23.648 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:22:23.649 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 403 0 null 5.9327ms
2025-04-09 02:22:27.424 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:22:27.426 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:22:27.427 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:22:27.429 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 403 0 null 5.036ms
2025-04-09 02:22:29.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:22:29.400 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:22:29.401 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:22:29.403 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 403 0 null 8.9926ms
2025-04-09 02:22:31.835 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - null null
2025-04-09 02:22:31.839 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:22:31.840 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:22:31.842 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - 403 0 null 6.6061ms
2025-04-09 02:22:36.017 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/details - null null
2025-04-09 02:22:36.020 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:22:36.028 +02:00 [INF] Route matched with {action = "GetMyDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyDetails() on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:22:36.037 +02:00 [INF] GetMyDetails called for logged-in user
2025-04-09 02:22:36.043 +02:00 [INF] Fetching user details for userId: 3, role: admin
2025-04-09 02:22:36.062 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email]
FROM [Admins] AS [a]
WHERE [a].[Id] = @__userId_0
2025-04-09 02:22:36.081 +02:00 [INF] Successfully retrieved details for userId: 3, role: admin
2025-04-09 02:22:36.090 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:22:36.101 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetMyDetails (AuthApi) in 72.3846ms
2025-04-09 02:22:36.106 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:22:36.109 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/details - 200 null application/json; charset=utf-8 92.6748ms
2025-04-09 02:22:50.405 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 61
2025-04-09 02:22:50.409 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:22:50.442 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:22:50.449 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:22:50.465 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:22:50.490 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:22:50.793 +02:00 [WRN] Invalid password for doctor with email: omaressamtefa@gmail.com
2025-04-09 02:22:50.794 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:22:50.797 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 351.2664ms
2025-04-09 02:22:50.799 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:22:50.800 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 396.0349ms
2025-04-09 02:22:54.582 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 62
2025-04-09 02:22:54.585 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:22:54.587 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:22:54.593 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:22:54.605 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:22:54.623 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:22:54.773 +02:00 [INF] Doctor login successful for email: omaressamtefa@gmail.com
2025-04-09 02:22:54.775 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:22:54.777 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 185.2909ms
2025-04-09 02:22:54.780 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:22:54.781 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 199.7554ms
2025-04-09 02:23:17.000 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - null null
2025-04-09 02:23:17.006 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:17.028 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:23:17.037 +02:00 [INF] GetPatientsByDoctor called with doctorId: 5, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:23:17.045 +02:00 [WRN] Unauthorized access attempt by userId: 2 to doctorId: 5
2025-04-09 02:23:17.048 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:23:17.052 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 20.3912ms
2025-04-09 02:23:17.073 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:17.076 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 76.7733ms
2025-04-09 02:23:23.470 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:23:23.476 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:23.482 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:23:23.489 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:23:23.497 +02:00 [WRN] Unauthorized access attempt by userId: 2 to doctorId: 1
2025-04-09 02:23:23.499 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:23:23.501 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 15.6384ms
2025-04-09 02:23:23.504 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:23.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 35.9763ms
2025-04-09 02:23:28.275 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:23:28.278 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:28.280 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:23:28.285 +02:00 [INF] GetPatientsByDoctor called with doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:23:28.295 +02:00 [INF] Fetching patients for doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:23:28.321 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:23:28.344 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:23:28.368 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:23:28.371 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 2
2025-04-09 02:23:28.372 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:23:28.373 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 92.1701ms
2025-04-09 02:23:28.378 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:28.380 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 104.7499ms
2025-04-09 02:23:29.659 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:23:29.663 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:29.665 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:23:29.671 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:23:29.677 +02:00 [WRN] Unauthorized access attempt by userId: 2 to doctorId: 3
2025-04-09 02:23:29.679 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:23:29.681 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 13.1808ms
2025-04-09 02:23:29.683 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:23:29.685 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 25.9467ms
2025-04-09 02:25:14.034 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:25:14.138 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:25:14.211 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:25:14.213 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:25:14.372 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:25:14.374 +02:00 [INF] Hosting environment: Development
2025-04-09 02:25:14.375 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:25:14.992 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:25:15.105 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 117.6663ms
2025-04-09 02:25:15.136 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:25:15.138 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:25:15.142 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.2608ms
2025-04-09 02:25:15.166 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.879ms
2025-04-09 02:25:15.292 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:25:15.304 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.6509ms
2025-04-09 02:25:33.383 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 62
2025-04-09 02:25:33.439 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:25:33.456 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:25:33.576 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:25:34.276 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:25:34.301 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:25:34.550 +02:00 [INF] Doctor login successful for email: omaressamtefa@gmail.com
2025-04-09 02:25:34.555 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:25:34.562 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1101.9798ms
2025-04-09 02:25:34.563 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:25:34.569 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1186.1308ms
2025-04-09 02:25:48.770 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:25:48.804 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:25:48.809 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:25:48.816 +02:00 [INF] GetPatientsByDoctor called with doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:25:48.821 +02:00 [INF] Fetching patients for doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:25:48.842 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:25:48.900 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:25:48.946 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:25:48.950 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 2
2025-04-09 02:25:48.951 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:25:48.957 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 146.8024ms
2025-04-09 02:25:48.958 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:25:48.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 188.8509ms
2025-04-09 02:25:52.403 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:25:52.407 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:25:52.408 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:25:52.410 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:25:52.413 +02:00 [WRN] Unauthorized access attempt by userId: 2 to doctorId: 1
2025-04-09 02:25:52.415 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:25:52.416 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 7.9468ms
2025-04-09 02:25:52.417 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:25:52.418 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 15.1505ms
2025-04-09 02:25:55.964 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:25:55.966 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:25:55.967 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:25:55.970 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:25:55.972 +02:00 [WRN] Unauthorized access attempt by userId: 2 to doctorId: 3
2025-04-09 02:25:55.973 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:25:55.974 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 6.2775ms
2025-04-09 02:25:55.974 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:25:55.975 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 11.6111ms
2025-04-09 02:26:00.974 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:26:00.976 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:26:00.976 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:26:00.979 +02:00 [INF] GetPatientsByDoctor called with doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:26:00.981 +02:00 [WRN] Unauthorized access attempt by userId: 2 to doctorId: 4
2025-04-09 02:26:00.981 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:26:00.982 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 4.8266ms
2025-04-09 02:26:00.983 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:26:00.983 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 9.8044ms
2025-04-09 02:26:07.318 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/details - null null
2025-04-09 02:26:07.321 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:26:07.323 +02:00 [INF] Route matched with {action = "GetMyDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyDetails() on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:26:07.326 +02:00 [INF] GetMyDetails called for logged-in user
2025-04-09 02:26:07.330 +02:00 [INF] Fetching user details for userId: 2, role: doctor
2025-04-09 02:26:07.374 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__userId_0
2025-04-09 02:26:07.378 +02:00 [INF] Successfully retrieved details for userId: 2, role: doctor
2025-04-09 02:26:07.379 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:26:07.383 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetMyDetails (AuthApi) in 59.1291ms
2025-04-09 02:26:07.384 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 02:26:07.385 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/details - 200 null application/json; charset=utf-8 66.3737ms
2025-04-09 02:26:32.168 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:26:32.171 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:26:32.172 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:26:32.175 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:26:32.182 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:26:32.368 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:26:32.369 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:26:32.370 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 196.7559ms
2025-04-09 02:26:32.374 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:26:32.374 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 206.411ms
2025-04-09 02:26:48.514 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:26:48.515 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:26:48.518 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:26:48.522 +02:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:26:48.526 +02:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:26:48.532 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-04-09 02:26:48.539 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-04-09 02:26:48.542 +02:00 [INF] Successfully retrieved 5 doctors
2025-04-09 02:26:48.542 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:26:48.544 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 25.5249ms
2025-04-09 02:26:48.545 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:26:48.546 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 32.2466ms
2025-04-09 02:26:55.993 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - null null
2025-04-09 02:26:55.994 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 02:26:55.998 +02:00 [INF] Route matched with {action = "GetAllPatients", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:26:56.001 +02:00 [INF] GetAllPatients called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:26:56.005 +02:00 [INF] Fetching all patients with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:26:56.011 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2025-04-09 02:26:56.026 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    ORDER BY [p].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p0].[Diagnosis], [p0].[Treatment], [p0].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p0].[Id], [d].[Id] AS [Id0], [p0].[PatientId]
    FROM [PatientHistories] AS [p0]
    INNER JOIN [Doctors] AS [d] ON [p0].[DoctorId] = [d].[Id]
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:26:56.032 +02:00 [INF] Successfully retrieved 1 patients
2025-04-09 02:26:56.033 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:26:56.035 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllPatients (AuthApi) in 36.3939ms
2025-04-09 02:26:56.036 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 02:26:56.036 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 43.9535ms
2025-04-09 02:27:00.941 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:27:00.944 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:27:00.945 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:27:00.946 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 403 0 null 4.666ms
2025-04-09 02:27:09.307 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:27:09.309 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor)
2025-04-09 02:27:09.310 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:27:09.310 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 403 0 null 3.2016ms
2025-04-09 02:27:16.621 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7295/api/Update/doctor/2 - null null
2025-04-09 02:27:16.623 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UpdateController.DeleteDoctor (AuthApi)'
2025-04-09 02:27:16.625 +02:00 [INF] Route matched with {action = "DeleteDoctor", controller = "Update"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDoctor(Int32) on controller AuthApi.Controllers.UpdateController (AuthApi).
2025-04-09 02:27:16.629 +02:00 [INF] DeleteDoctor called for doctor ID 2
2025-04-09 02:27:16.650 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__p_0
2025-04-09 02:27:16.657 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Diagnosis], [p].[DoctorId], [p].[PatientId], [p].[Treatment], [p].[TreatmentDate]
FROM [PatientHistories] AS [p]
WHERE [p].[DoctorId] = @__id_0
2025-04-09 02:27:16.737 +02:00 [ERR] Failed to delete image: /Uploads/Images/doctor-2-20250408092537.jpg
System.ArgumentNullException: Value cannot be null. (Parameter 'path1')
   at System.ArgumentNullException.Throw(String paramName)
   at System.IO.Path.Combine(String path1, String path2)
   at AuthApi.Services.ImageService.DeleteImage(String imageUrl) in E:\Course\login .net\AuthApi\AuthApi\Services\ImageService.cs:line 85
2025-04-09 02:27:16.775 +02:00 [WRN] Failed to delete image for doctor ID 2: Value cannot be null. (Parameter 'path1')
System.ArgumentNullException: Value cannot be null. (Parameter 'path1')
   at System.ArgumentNullException.Throw(String paramName)
   at System.IO.Path.Combine(String path1, String path2)
   at AuthApi.Services.ImageService.DeleteImage(String imageUrl) in E:\Course\login .net\AuthApi\AuthApi\Services\ImageService.cs:line 85
   at AuthApi.Controllers.UpdateController.DeleteDoctor(Int32 id) in E:\Course\login .net\AuthApi\AuthApi\Controllers\UpdateController.cs:line 304
2025-04-09 02:27:16.835 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Doctors]
OUTPUT 1
WHERE [Id] = @p0;
2025-04-09 02:27:16.847 +02:00 [INF] Doctor deleted successfully for ID 2
2025-04-09 02:27:16.847 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:27:16.848 +02:00 [INF] Executed action AuthApi.Controllers.UpdateController.DeleteDoctor (AuthApi) in 221.7081ms
2025-04-09 02:27:16.848 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UpdateController.DeleteDoctor (AuthApi)'
2025-04-09 02:27:16.849 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7295/api/Update/doctor/2 - 200 null application/json; charset=utf-8 227.7153ms
2025-04-09 02:27:28.222 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:27:28.224 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:27:28.224 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:27:28.227 +02:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:27:28.228 +02:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:27:28.233 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-04-09 02:27:28.237 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-04-09 02:27:28.240 +02:00 [INF] Successfully retrieved 4 doctors
2025-04-09 02:27:28.240 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:27:28.241 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 15.5185ms
2025-04-09 02:27:28.241 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:27:28.242 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 20.3697ms
2025-04-09 02:28:05.625 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 62
2025-04-09 02:28:05.627 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:05.628 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:28:05.630 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:28:05.634 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:28:05.638 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:28:05.647 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 02:28:05.649 +02:00 [WRN] Invalid login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:28:05.650 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:28:05.651 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 22.005ms
2025-04-09 02:28:05.655 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:05.656 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 30.5798ms
2025-04-09 02:28:20.044 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 62
2025-04-09 02:28:20.046 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:20.047 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:28:20.049 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:28:20.054 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:28:20.057 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:28:20.061 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 02:28:20.063 +02:00 [WRN] Invalid login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:28:20.064 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:28:20.064 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 16.8615ms
2025-04-09 02:28:20.065 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:20.065 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 21.3202ms
2025-04-09 02:28:24.101 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 61
2025-04-09 02:28:24.103 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:24.103 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:28:24.106 +02:00 [INF] Login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:28:24.111 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:28:24.116 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:28:24.122 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 02:28:24.125 +02:00 [WRN] Invalid login attempt for email: omaressamtefa@gmail.com
2025-04-09 02:28:24.125 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:28:24.126 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 21.9571ms
2025-04-09 02:28:24.127 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:24.127 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 26.9231ms
2025-04-09 02:28:43.771 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 67
2025-04-09 02:28:43.774 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:43.776 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:28:43.780 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:28:43.786 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:28:43.792 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:28:43.921 +02:00 [INF] Doctor login successful for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:28:43.922 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:28:43.923 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 145.1802ms
2025-04-09 02:28:43.923 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:28:43.924 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 153.3351ms
2025-04-09 02:29:00.833 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:29:00.834 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:29:00.835 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:29:00.837 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:29:00.839 +02:00 [WRN] Unauthorized access attempt by userId: 4 to doctorId: 1
2025-04-09 02:29:00.840 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:29:00.840 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 5.0231ms
2025-04-09 02:29:00.841 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:29:00.842 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 9.1303ms
2025-04-09 02:31:47.966 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:31:48.055 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:31:48.125 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:31:48.127 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:31:48.186 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:31:48.190 +02:00 [INF] Hosting environment: Development
2025-04-09 02:31:48.193 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:31:48.836 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:31:48.957 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 128.0807ms
2025-04-09 02:31:48.989 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:31:48.989 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:31:48.996 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.7715ms
2025-04-09 02:31:49.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.5607ms
2025-04-09 02:31:49.115 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:31:49.128 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.414ms
2025-04-09 02:31:54.634 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 67
2025-04-09 02:31:54.683 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:31:54.699 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:31:54.819 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:31:55.618 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:31:55.692 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:31:55.953 +02:00 [INF] Doctor login successful for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:31:55.961 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:31:55.970 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1265.8216ms
2025-04-09 02:31:55.972 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:31:55.978 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1343.7761ms
2025-04-09 02:32:12.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:32:12.609 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-04-09 02:32:12.613 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-09 02:32:12.615 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 403 0 null 40.7475ms
2025-04-09 02:32:21.038 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:32:21.044 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:32:21.049 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:32:21.058 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:32:21.064 +02:00 [WRN] Unauthorized access attempt by doctor userId: 4 to doctorId: 3
2025-04-09 02:32:21.067 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:32:21.071 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 19.2237ms
2025-04-09 02:32:21.072 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:32:21.074 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 35.9311ms
2025-04-09 02:32:32.663 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - null null
2025-04-09 02:32:32.668 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:32:32.669 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:32:32.674 +02:00 [INF] GetPatientsByDoctor called with doctorId: 5, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:32:32.677 +02:00 [WRN] Unauthorized access attempt by doctor userId: 4 to doctorId: 5
2025-04-09 02:32:32.678 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:32:32.680 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 8.8983ms
2025-04-09 02:32:32.681 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:32:32.682 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 18.977ms
2025-04-09 02:32:41.558 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:32:41.562 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:32:41.562 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:32:41.566 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:32:41.584 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:32:41.771 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:32:41.772 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:32:41.773 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 208.8549ms
2025-04-09 02:32:41.774 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:32:41.774 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 216.4127ms
2025-04-09 02:32:56.805 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - null null
2025-04-09 02:32:56.808 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:32:56.809 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:32:56.813 +02:00 [INF] GetPatientsByDoctor called with doctorId: 5, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:32:56.818 +02:00 [INF] Fetching patients for doctorId: 5, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:32:56.874 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:32:56.973 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:32:57.027 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:32:57.031 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 5
2025-04-09 02:32:57.032 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:32:57.039 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 228.5538ms
2025-04-09 02:32:57.040 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:32:57.042 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/5?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 237.8753ms
2025-04-09 02:33:01.319 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:33:01.321 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:01.322 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:33:01.325 +02:00 [INF] GetPatientsByDoctor called with doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:01.327 +02:00 [INF] Fetching patients for doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:01.332 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:33:01.334 +02:00 [WRN] Doctor not found: 2
2025-04-09 02:33:01.420 +02:00 [ERR] Error fetching patients for doctorId: 2. StackTrace:    at AuthApi.Services.UserService.GetPatientsByDoctorAsync(Int32 doctorId, Int32 pageNumber, Int32 pageSize, String searchTerm) in E:\Course\login .net\AuthApi\AuthApi\Services\UserService.cs:line 142
System.InvalidOperationException: Doctor not found
   at AuthApi.Services.UserService.GetPatientsByDoctorAsync(Int32 doctorId, Int32 pageNumber, Int32 pageSize, String searchTerm) in E:\Course\login .net\AuthApi\AuthApi\Services\UserService.cs:line 142
2025-04-09 02:33:01.512 +02:00 [ERR] Error retrieving patients for doctorId: 2. StackTrace:    at AuthApi.Services.UserService.GetPatientsByDoctorAsync(Int32 doctorId, Int32 pageNumber, Int32 pageSize, String searchTerm) in E:\Course\login .net\AuthApi\AuthApi\Services\UserService.cs:line 142
   at AuthApi.Controllers.UserController.GetPatientsByDoctor(Int32 doctorId, Int32 pageNumber, Int32 pageSize, String searchTerm) in E:\Course\login .net\AuthApi\AuthApi\Controllers\UserController.cs:line 114
System.InvalidOperationException: Doctor not found
   at AuthApi.Services.UserService.GetPatientsByDoctorAsync(Int32 doctorId, Int32 pageNumber, Int32 pageSize, String searchTerm) in E:\Course\login .net\AuthApi\AuthApi\Services\UserService.cs:line 142
   at AuthApi.Controllers.UserController.GetPatientsByDoctor(Int32 doctorId, Int32 pageNumber, Int32 pageSize, String searchTerm) in E:\Course\login .net\AuthApi\AuthApi\Controllers\UserController.cs:line 114
2025-04-09 02:33:01.515 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:33:01.517 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 193.4396ms
2025-04-09 02:33:01.517 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:01.518 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 500 null application/json; charset=utf-8 199.5351ms
2025-04-09 02:33:06.465 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:33:06.468 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:06.469 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:33:06.472 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:06.475 +02:00 [INF] Fetching patients for doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:06.479 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:33:06.482 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:33:06.488 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:33:06.491 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 3
2025-04-09 02:33:06.492 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:33:06.493 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 22.3417ms
2025-04-09 02:33:06.494 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:06.495 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 30.9422ms
2025-04-09 02:33:09.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:33:09.854 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:09.855 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:33:09.857 +02:00 [INF] GetPatientsByDoctor called with doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:09.859 +02:00 [INF] Fetching patients for doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:09.863 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:33:09.867 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:33:09.870 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:33:09.873 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 4
2025-04-09 02:33:09.874 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:33:09.875 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 18.6986ms
2025-04-09 02:33:09.876 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:09.877 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 25.9173ms
2025-04-09 02:33:13.034 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:33:13.037 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:13.038 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:33:13.040 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:13.043 +02:00 [INF] Fetching patients for doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:33:13.047 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:33:13.051 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:33:13.055 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:33:13.062 +02:00 [INF] Successfully retrieved 1 patients for doctorId: 1
2025-04-09 02:33:13.063 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:33:13.067 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 27.7626ms
2025-04-09 02:33:13.068 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:33:13.069 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 34.8793ms
2025-04-09 02:35:05.333 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:35:05.426 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:35:05.493 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:35:05.494 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:35:05.565 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:35:05.568 +02:00 [INF] Hosting environment: Development
2025-04-09 02:35:05.571 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:35:06.626 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:35:06.759 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 138.0634ms
2025-04-09 02:35:06.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:35:06.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:35:06.803 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 12.2329ms
2025-04-09 02:35:06.822 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.0417ms
2025-04-09 02:35:06.915 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:35:06.927 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.6073ms
2025-04-09 02:35:22.549 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:35:22.601 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:35:22.618 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:35:22.747 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:35:23.490 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:35:23.755 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:35:23.762 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:35:23.772 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1147.7594ms
2025-04-09 02:35:23.773 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:35:23.779 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1230.4846ms
2025-04-09 02:35:38.350 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:35:38.357 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor|admin)
2025-04-09 02:35:38.382 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-09 02:35:38.384 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 401 0 null 34.1808ms
2025-04-09 02:35:40.365 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:35:40.370 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor|admin)
2025-04-09 02:35:40.372 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-09 02:35:40.373 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 0 null 8.0678ms
2025-04-09 02:35:42.884 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:35:42.888 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor|admin)
2025-04-09 02:35:42.889 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-09 02:35:42.890 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 0 null 5.9701ms
2025-04-09 02:35:43.435 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:35:43.438 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (doctor|admin)
2025-04-09 02:35:43.439 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-09 02:35:43.440 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 0 null 4.9585ms
2025-04-09 02:37:55.974 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 02:37:56.068 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 02:37:56.145 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 02:37:56.147 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 02:37:56.212 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 02:37:56.214 +02:00 [INF] Hosting environment: Development
2025-04-09 02:37:56.216 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 02:37:57.130 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 02:37:57.240 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 114.0196ms
2025-04-09 02:37:57.277 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 02:37:57.278 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 02:37:57.288 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 10.8874ms
2025-04-09 02:37:57.322 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.7974ms
2025-04-09 02:37:57.409 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 02:37:57.420 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.1168ms
2025-04-09 02:38:11.252 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 52
2025-04-09 02:38:11.304 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:38:11.322 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:38:11.478 +02:00 [INF] Login attempt for email: omar@gmail.com
2025-04-09 02:38:12.229 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:38:12.629 +02:00 [INF] Admin login successful for email: omar@gmail.com
2025-04-09 02:38:12.636 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:38:12.644 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1317.7114ms
2025-04-09 02:38:12.645 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:38:12.652 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 1400.9851ms
2025-04-09 02:38:27.896 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 02:38:27.930 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:38:27.935 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:38:27.945 +02:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:27.949 +02:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:27.989 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-04-09 02:38:28.006 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-04-09 02:38:28.011 +02:00 [INF] Successfully retrieved 4 doctors
2025-04-09 02:38:28.013 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:38:28.028 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 89.9954ms
2025-04-09 02:38:28.031 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 02:38:28.032 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 136.495ms
2025-04-09 02:38:33.009 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - null null
2025-04-09 02:38:33.015 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 02:38:33.020 +02:00 [INF] Route matched with {action = "GetAllPatients", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:38:33.025 +02:00 [INF] GetAllPatients called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:33.029 +02:00 [INF] Fetching all patients with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:33.082 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2025-04-09 02:38:33.152 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    ORDER BY [p].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p0].[Diagnosis], [p0].[Treatment], [p0].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p0].[Id], [d].[Id] AS [Id0], [p0].[PatientId]
    FROM [PatientHistories] AS [p0]
    INNER JOIN [Doctors] AS [d] ON [p0].[DoctorId] = [d].[Id]
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:38:33.160 +02:00 [INF] Successfully retrieved 1 patients
2025-04-09 02:38:33.162 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:38:33.168 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllPatients (AuthApi) in 145.8554ms
2025-04-09 02:38:33.170 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 02:38:33.171 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 162.9739ms
2025-04-09 02:38:44.325 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:38:44.328 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:38:44.331 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:38:44.336 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:44.341 +02:00 [INF] Fetching patients for doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:44.355 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:38:44.368 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:38:44.388 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:38:44.394 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 3
2025-04-09 02:38:44.396 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:38:44.398 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 65.7834ms
2025-04-09 02:38:44.400 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:38:44.401 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 76.597ms
2025-04-09 02:38:47.931 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:38:47.933 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:38:47.934 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:38:47.937 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:47.939 +02:00 [INF] Fetching patients for doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:38:47.945 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:38:47.949 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:38:47.953 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:38:47.956 +02:00 [INF] Successfully retrieved 1 patients for doctorId: 1
2025-04-09 02:38:47.956 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:38:47.957 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 22.0464ms
2025-04-09 02:38:47.959 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:38:47.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 29.0424ms
2025-04-09 02:39:26.132 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 67
2025-04-09 02:39:26.137 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:39:26.139 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:39:26.142 +02:00 [INF] Login attempt for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:39:26.146 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 02:39:26.154 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 02:39:26.355 +02:00 [INF] Doctor login successful for email: dontplaywithmeeh007@gmail.com
2025-04-09 02:39:26.357 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:39:26.358 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 217.5651ms
2025-04-09 02:39:26.363 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 02:39:26.363 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 232.7936ms
2025-04-09 02:39:45.448 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 02:39:45.451 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:45.452 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:39:45.455 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:39:45.458 +02:00 [WRN] Unauthorized access attempt by doctor userId: 4 to doctorId: 1
2025-04-09 02:39:45.459 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:39:45.462 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 8.2924ms
2025-04-09 02:39:45.464 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:45.465 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 16.1599ms
2025-04-09 02:39:50.955 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 02:39:50.959 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:50.961 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:39:50.964 +02:00 [INF] GetPatientsByDoctor called with doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:39:50.966 +02:00 [WRN] Unauthorized access attempt by doctor userId: 4 to doctorId: 2
2025-04-09 02:39:50.967 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:39:50.968 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 6.1053ms
2025-04-09 02:39:50.969 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:50.970 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 15.2356ms
2025-04-09 02:39:52.772 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 02:39:52.775 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:52.776 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:39:52.778 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:39:52.781 +02:00 [WRN] Unauthorized access attempt by doctor userId: 4 to doctorId: 3
2025-04-09 02:39:52.781 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 02:39:52.782 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 5.5245ms
2025-04-09 02:39:52.784 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:52.784 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 401 null application/json; charset=utf-8 12.6117ms
2025-04-09 02:39:54.591 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:39:54.594 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:54.595 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:39:54.598 +02:00 [INF] GetPatientsByDoctor called with doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:39:54.600 +02:00 [INF] Fetching patients for doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:39:54.606 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:39:54.614 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:39:54.626 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:39:54.630 +02:00 [INF] Successfully retrieved 0 patients for doctorId: 4
2025-04-09 02:39:54.631 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:39:54.632 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 36.2076ms
2025-04-09 02:39:54.635 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:39:54.636 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 44.5433ms
2025-04-09 02:40:38.018 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary2ee6cf12e71fabc9738f3690ae26cd8 31140
2025-04-09 02:40:38.022 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 02:40:38.027 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 02:40:38.054 +02:00 [INF] RegisterPatient called with email: saraali@gmail.com
2025-04-09 02:40:38.064 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-04-09 02:40:38.071 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-04-09 02:40:38.287 +02:00 [INF] Attempting to save patient with email: saraali@gmail.com
2025-04-09 02:40:38.418 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([BirthDate], [CreatedAt], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 02:40:38.438 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p8, @p9, @p10, @p11, @p12);
2025-04-09 02:40:38.451 +02:00 [INF] Saving image for patient with ID 3 to E:\Course\login .net\AuthApi\AuthApi\Uploads\Images\patient-3-20250409024038.jpg
2025-04-09 02:40:38.461 +02:00 [INF] Image saved successfully for patient with ID 3. Path: /Uploads/Images/patient-3-20250409024038.jpg
2025-04-09 02:40:38.474 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Patients] SET [ImageUrl] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-04-09 02:40:38.477 +02:00 [INF] Patient registered successfully with ID: 3
2025-04-09 02:40:38.478 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:40:38.480 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 451.0785ms
2025-04-09 02:40:38.494 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 02:40:38.496 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 477.1133ms
2025-04-09 02:40:43.938 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - null null
2025-04-09 02:40:43.940 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:40:43.941 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 02:40:43.944 +02:00 [INF] GetPatientsByDoctor called with doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:40:43.946 +02:00 [INF] Fetching patients for doctorId: 4, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 02:40:43.951 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 02:40:43.957 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 02:40:43.975 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 02:40:43.977 +02:00 [INF] Successfully retrieved 1 patients for doctorId: 4
2025-04-09 02:40:43.978 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 02:40:43.979 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 37.0952ms
2025-04-09 02:40:43.986 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 02:40:43.988 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/4?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 49.8028ms
2025-04-09 06:48:40.870 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 06:48:40.989 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 06:48:41.088 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 06:48:41.092 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 06:48:41.297 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 06:48:41.301 +02:00 [INF] Hosting environment: Development
2025-04-09 06:48:41.303 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 06:48:41.740 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 06:48:41.898 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 164.0076ms
2025-04-09 06:48:41.929 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 06:48:41.929 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 06:48:41.929 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/swagger-ui.css - null null
2025-04-09 06:48:41.941 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 11.9039ms
2025-04-09 06:48:42.009 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-09 06:48:42.014 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/swagger-ui.css - 499 144929 text/css 85.8279ms
2025-04-09 06:48:42.029 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.0928ms
2025-04-09 06:48:42.081 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/favicon-32x32.png - null null
2025-04-09 06:48:42.121 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-09 06:48:42.124 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/favicon-32x32.png - 499 628 image/png 42.9657ms
2025-04-09 06:48:42.178 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 06:48:42.191 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.4043ms
2025-04-09 06:48:52.170 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/reset-database - null 0
2025-04-09 06:48:52.363 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.ResetDatabase (AuthApi)'
2025-04-09 06:48:52.413 +02:00 [INF] Route matched with {action = "ResetDatabase", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetDatabase() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 06:48:52.806 +02:00 [INF] Resetting database...
2025-04-09 06:48:55.278 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Diagnosis], [p].[DoctorId], [p].[PatientId], [p].[Treatment], [p].[TreatmentDate]
FROM [PatientHistories] AS [p]
2025-04-09 06:48:55.704 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [PatientHistories]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [PatientHistories]
OUTPUT 1
WHERE [Id] = @p1;
2025-04-09 06:48:55.793 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
2025-04-09 06:48:55.861 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
2025-04-09 06:48:55.920 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
2025-04-09 06:48:56.002 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Admins]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [Admins]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [Admins]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [Doctors]
OUTPUT 1
WHERE [Id] = @p3;
DELETE FROM [Doctors]
OUTPUT 1
WHERE [Id] = @p4;
DELETE FROM [Doctors]
OUTPUT 1
WHERE [Id] = @p5;
DELETE FROM [Doctors]
OUTPUT 1
WHERE [Id] = @p6;
DELETE FROM [Patients]
OUTPUT 1
WHERE [Id] = @p7;
DELETE FROM [Patients]
OUTPUT 1
WHERE [Id] = @p8;
2025-04-09 06:48:56.057 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DBCC CHECKIDENT ('Admins', RESEED, 0)
2025-04-09 06:48:56.084 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DBCC CHECKIDENT ('Doctors', RESEED, 0)
2025-04-09 06:48:56.101 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DBCC CHECKIDENT ('Patients', RESEED, 0)
2025-04-09 06:48:56.120 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DBCC CHECKIDENT ('PatientHistories', RESEED, 0)
2025-04-09 06:48:57.394 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Admins] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1)) AS i ([Email], [PasswordHash], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Email], [PasswordHash])
VALUES (i.[Email], i.[PasswordHash])
OUTPUT INSERTED.[Id], i._Position;
2025-04-09 06:48:57.434 +02:00 [INF] Database reset successfully. Added admin users with Id 1 and 2.
2025-04-09 06:48:57.451 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 06:48:57.478 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.ResetDatabase (AuthApi) in 5046.8381ms
2025-04-09 06:48:57.484 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.ResetDatabase (AuthApi)'
2025-04-09 06:48:57.500 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/reset-database - 200 null application/json; charset=utf-8 5330.8083ms
2025-04-09 06:49:38.476 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 55
2025-04-09 06:49:38.490 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 06:49:38.536 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 06:49:38.632 +02:00 [INF] Login attempt for email: admin1@gedisa.com
2025-04-09 06:49:38.883 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 06:49:39.500 +02:00 [WRN] Invalid password for admin with email: admin1@gedisa.com
2025-04-09 06:49:39.501 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 06:49:39.505 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 961.8199ms
2025-04-09 06:49:39.509 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 06:49:39.514 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 1038.3635ms
2025-04-09 06:54:00.597 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 06:54:00.634 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 06:54:00.635 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 06:54:00.636 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 06:54:00.663 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-09 06:54:00.673 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-04-09 07:36:29.587 +02:00 [INF] User profile is available. Using 'C:\Users\TEFA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-09 07:36:29.646 +02:00 [WRN] The WebRootPath was not found: E:\Course\login .net\AuthApi\AuthApi\wwwroot. Static files may be unavailable.
2025-04-09 07:36:29.676 +02:00 [INF] Now listening on: https://localhost:7295
2025-04-09 07:36:29.678 +02:00 [INF] Now listening on: http://localhost:5024
2025-04-09 07:36:29.729 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-09 07:36:29.731 +02:00 [INF] Hosting environment: Development
2025-04-09 07:36:29.731 +02:00 [INF] Content root path: E:\Course\login .net\AuthApi\AuthApi
2025-04-09 07:36:30.130 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/index.html - null null
2025-04-09 07:36:30.249 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/index.html - 200 null text/html;charset=utf-8 119.6848ms
2025-04-09 07:36:30.277 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - null null
2025-04-09 07:36:30.278 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/_vs/browserLink - null null
2025-04-09 07:36:30.284 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_framework/aspnetcore-browser-refresh.js - 200 16499 application/javascript; charset=utf-8 6.9041ms
2025-04-09 07:36:30.299 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.9655ms
2025-04-09 07:36:30.388 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - null null
2025-04-09 07:36:30.399 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.436ms
2025-04-09 07:36:41.828 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 59
2025-04-09 07:36:41.875 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:36:41.914 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:36:42.033 +02:00 [INF] Login attempt for email: admin2@gmail.com
2025-04-09 07:36:43.294 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 07:36:43.331 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 07:36:43.343 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 07:36:43.349 +02:00 [WRN] Invalid login attempt for email: admin2@gmail.com
2025-04-09 07:36:43.355 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 07:36:43.362 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 1435.4489ms
2025-04-09 07:36:43.363 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:36:43.370 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 1542.3759ms
2025-04-09 07:36:54.479 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 59
2025-04-09 07:36:54.486 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:36:54.487 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:36:54.493 +02:00 [INF] Login attempt for email: admin2@gmail.com
2025-04-09 07:36:54.521 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 07:36:54.527 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 07:36:54.533 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 07:36:54.536 +02:00 [WRN] Invalid login attempt for email: admin2@gmail.com
2025-04-09 07:36:54.538 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 07:36:54.541 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 50.8706ms
2025-04-09 07:36:54.543 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:36:54.545 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 66.3568ms
2025-04-09 07:37:02.345 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 60
2025-04-09 07:37:02.350 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:37:02.352 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:37:02.357 +02:00 [INF] Login attempt for email: admin2@gmail.com
2025-04-09 07:37:02.431 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 07:37:02.434 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Email] = @__loginDto_Email_0
2025-04-09 07:37:02.437 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__loginDto_Email_0
2025-04-09 07:37:02.439 +02:00 [WRN] Invalid login attempt for email: admin2@gmail.com
2025-04-09 07:37:02.440 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 07:37:02.441 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 85.7919ms
2025-04-09 07:37:02.442 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:37:02.443 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 400 null application/json; charset=utf-8 98.3303ms
2025-04-09 07:37:15.013 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/login - application/json 61
2025-04-09 07:37:15.076 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:37:15.083 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.DTOs.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:37:15.086 +02:00 [INF] Login attempt for email: admin2@gedisa.com
2025-04-09 07:37:15.088 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email], [a].[PasswordHash]
FROM [Admins] AS [a]
WHERE [a].[Email] = @__loginDto_Email_0
2025-04-09 07:37:15.481 +02:00 [INF] Admin login successful for email: admin2@gedisa.com
2025-04-09 07:37:15.482 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 07:37:15.485 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 399.9883ms
2025-04-09 07:37:15.486 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-04-09 07:37:15.487 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/login - 200 null application/json; charset=utf-8 474.0628ms
2025-04-09 07:39:08.083 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundarya9eb876f3a74639ada4a00dcf7da8c25 994
2025-04-09 07:39:08.170 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 07:39:08.180 +02:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:39:08.198 +02:00 [INF] RegisterDoctor called with email: alice.brown@gedisa.com
2025-04-09 07:39:08.216 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:39:08.521 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 07:39:08.550 +02:00 [INF] No image provided for doctor with ID 1
2025-04-09 07:39:08.552 +02:00 [INF] Doctor registered successfully with ID: 1
2025-04-09 07:39:08.553 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:39:08.564 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 381.7726ms
2025-04-09 07:39:08.570 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 07:39:08.572 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 200 null application/json; charset=utf-8 488.3068ms
2025-04-09 07:39:57.251 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundaryc3225b84ca4623c7614ebd4bf8a0ce8b 987
2025-04-09 07:39:57.256 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 07:39:57.257 +02:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:39:57.261 +02:00 [INF] RegisterDoctor called with email: ahmedali@gmail.com
2025-04-09 07:39:57.269 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:39:57.406 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 07:39:57.409 +02:00 [INF] No image provided for doctor with ID 2
2025-04-09 07:39:57.411 +02:00 [INF] Doctor registered successfully with ID: 2
2025-04-09 07:39:57.412 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:39:57.413 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 153.4259ms
2025-04-09 07:39:57.414 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 07:39:57.415 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 200 null application/json; charset=utf-8 164.1651ms
2025-04-09 07:40:40.228 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - multipart/form-data; boundary=----geckoformboundary14cbbdce94d3a52da5b975154d0839ec 988
2025-04-09 07:40:40.231 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 07:40:40.232 +02:00 [INF] Route matched with {action = "RegisterDoctor", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterDoctor(AuthApi.DTOs.DoctorDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:40:40.234 +02:00 [INF] RegisterDoctor called with email: hossaali@gmail.com
2025-04-09 07:40:40.236 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__doctorDto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:40:40.438 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([BirthDate], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash], [Specialty])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 07:40:40.440 +02:00 [INF] No image provided for doctor with ID 3
2025-04-09 07:40:40.441 +02:00 [INF] Doctor registered successfully with ID: 3
2025-04-09 07:40:40.442 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:40:40.443 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi) in 209.722ms
2025-04-09 07:40:40.444 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterDoctor (AuthApi)'
2025-04-09 07:40:40.445 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/doctor/register - 200 null application/json; charset=utf-8 216.7716ms
2025-04-09 07:41:00.370 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 07:41:00.380 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 07:41:00.387 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:41:00.395 +02:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:41:00.400 +02:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:41:00.479 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-04-09 07:41:00.506 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-04-09 07:41:00.510 +02:00 [INF] Successfully retrieved 3 doctors
2025-04-09 07:41:00.511 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:41:00.514 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 125.5067ms
2025-04-09 07:41:00.516 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 07:41:00.517 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 147.0031ms
2025-04-09 07:42:07.090 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary363ef029e7a92d311c52318fdbd7b447 1232
2025-04-09 07:42:07.092 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:42:07.097 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:42:07.110 +02:00 [INF] RegisterPatient called with email: aliahmed@gmail.com
2025-04-09 07:42:07.121 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-04-09 07:42:07.135 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-04-09 07:42:07.300 +02:00 [INF] Attempting to save patient with email: aliahmed@gmail.com
2025-04-09 07:42:07.351 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([BirthDate], [CreatedAt], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 07:42:07.382 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p8, @p9, @p10, @p11, @p12);
2025-04-09 07:42:07.420 +02:00 [INF] No image provided for patient with ID 1
2025-04-09 07:42:07.426 +02:00 [INF] Patient registered successfully with ID: 1
2025-04-09 07:42:07.429 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:42:07.436 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 338.0755ms
2025-04-09 07:42:07.439 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:42:07.440 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 350.0885ms
2025-04-09 07:42:33.499 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundarya759d310046e90f23f1bfc8910cf0443 1232
2025-04-09 07:42:33.504 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:42:33.505 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:42:33.509 +02:00 [INF] RegisterPatient called with email: aliahmed@gmail.com
2025-04-09 07:42:33.513 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-04-09 07:42:33.517 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-04-09 07:42:33.702 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patient_Id_0='?' (DbType = Int32), @__doctor_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p]
        WHERE [p].[PatientId] = @__patient_Id_0 AND [p].[DoctorId] = @__doctor_Id_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:42:33.705 +02:00 [INF] Attempting to save patient with email: aliahmed@gmail.com
2025-04-09 07:42:33.727 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-09 07:42:33.729 +02:00 [INF] No image provided for patient with ID 1
2025-04-09 07:42:33.730 +02:00 [INF] Patient registered successfully with ID: 1
2025-04-09 07:42:33.731 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:42:33.733 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 225.7004ms
2025-04-09 07:42:33.734 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:42:33.739 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 240.1002ms
2025-04-09 07:43:23.704 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundarye76195f99abaad514d4127f0ce6ffebe 1233
2025-04-09 07:43:23.706 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:23.707 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:43:23.712 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-09 07:43:23.736 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 26.5335ms
2025-04-09 07:43:23.738 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:23.739 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 400 null application/problem+json; charset=utf-8 34.6301ms
2025-04-09 07:43:28.501 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary614677023fcb73969a81555d14dfd1bf 1233
2025-04-09 07:43:28.506 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:28.508 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:43:28.512 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-09 07:43:28.513 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 2.7323ms
2025-04-09 07:43:28.515 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:28.516 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 400 null application/problem+json; charset=utf-8 14.6704ms
2025-04-09 07:43:40.526 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary5db5beeb7b22ebd82513592d816e212b 1237
2025-04-09 07:43:40.530 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:40.531 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:43:40.533 +02:00 [INF] RegisterPatient called with email: jane.smith@gmail.com
2025-04-09 07:43:40.538 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-04-09 07:43:40.543 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-04-09 07:43:40.730 +02:00 [INF] Attempting to save patient with email: jane.smith@gmail.com
2025-04-09 07:43:40.734 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([BirthDate], [CreatedAt], [Email], [FirstName], [Gender], [ImageUrl], [LastName], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-04-09 07:43:40.740 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p8, @p9, @p10, @p11, @p12);
2025-04-09 07:43:40.760 +02:00 [INF] No image provided for patient with ID 2
2025-04-09 07:43:40.761 +02:00 [INF] Patient registered successfully with ID: 2
2025-04-09 07:43:40.762 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:43:40.765 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 231.8255ms
2025-04-09 07:43:40.766 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:40.767 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 240.701ms
2025-04-09 07:43:46.284 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7295/api/Auth/patient/register - multipart/form-data; boundary=----geckoformboundary1b5dc6d11c3545af3e9bcb3dcf182d2d 1237
2025-04-09 07:43:46.288 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:46.289 +02:00 [INF] Route matched with {action = "RegisterPatient", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterPatient(AuthApi.DTOs.PatientDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-04-09 07:43:46.292 +02:00 [INF] RegisterPatient called with email: jane.smith@gmail.com
2025-04-09 07:43:46.294 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__patientDto_DoctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BirthDate], [d].[Email], [d].[FirstName], [d].[Gender], [d].[ImageUrl], [d].[LastName], [d].[PasswordHash], [d].[Specialty]
FROM [Doctors] AS [d]
WHERE [d].[Id] = @__patientDto_DoctorId_0
2025-04-09 07:43:46.299 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__patientDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BirthDate], [p].[CreatedAt], [p].[Email], [p].[FirstName], [p].[Gender], [p].[ImageUrl], [p].[LastName], [p].[PasswordHash]
FROM [Patients] AS [p]
WHERE [p].[Email] = @__patientDto_Email_0
2025-04-09 07:43:46.479 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__patient_Id_0='?' (DbType = Int32), @__doctor_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p]
        WHERE [p].[PatientId] = @__patient_Id_0 AND [p].[DoctorId] = @__doctor_Id_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:43:46.483 +02:00 [INF] Attempting to save patient with email: jane.smith@gmail.com
2025-04-09 07:43:46.505 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientHistories] ([Diagnosis], [DoctorId], [PatientId], [Treatment], [TreatmentDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-09 07:43:46.507 +02:00 [INF] No image provided for patient with ID 2
2025-04-09 07:43:46.508 +02:00 [INF] Patient registered successfully with ID: 2
2025-04-09 07:43:46.509 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:43:46.510 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.RegisterPatient (AuthApi) in 218.6116ms
2025-04-09 07:43:46.510 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RegisterPatient (AuthApi)'
2025-04-09 07:43:46.512 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7295/api/Auth/patient/register - 200 null application/json; charset=utf-8 228.4354ms
2025-04-09 07:43:58.566 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - null null
2025-04-09 07:43:58.571 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 07:43:58.572 +02:00 [INF] Route matched with {action = "GetAllDoctors", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDoctors(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:43:58.576 +02:00 [INF] GetAllDoctors called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:43:58.578 +02:00 [INF] Fetching all doctors with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:43:58.581 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
2025-04-09 07:43:58.585 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[FirstName], [d].[LastName], [d].[Gender], [d].[BirthDate], [d].[Specialty], [d].[Email], [d].[ImageUrl]
FROM [Doctors] AS [d]
ORDER BY [d].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-04-09 07:43:58.586 +02:00 [INF] Successfully retrieved 3 doctors
2025-04-09 07:43:58.587 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.DoctorResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:43:58.588 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllDoctors (AuthApi) in 13.8803ms
2025-04-09 07:43:58.589 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllDoctors (AuthApi)'
2025-04-09 07:43:58.591 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/doctors?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 25.1789ms
2025-04-09 07:44:05.258 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - null null
2025-04-09 07:44:05.268 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 07:44:05.276 +02:00 [INF] Route matched with {action = "GetAllPatients", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients(Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:44:05.282 +02:00 [INF] GetAllPatients called with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:05.289 +02:00 [INF] Fetching all patients with pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:05.301 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2025-04-09 07:44:05.362 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    ORDER BY [p].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p0].[Diagnosis], [p0].[Treatment], [p0].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p0].[Id], [d].[Id] AS [Id0], [p0].[PatientId]
    FROM [PatientHistories] AS [p0]
    INNER JOIN [Doctors] AS [d] ON [p0].[DoctorId] = [d].[Id]
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 07:44:05.365 +02:00 [INF] Successfully retrieved 2 patients
2025-04-09 07:44:05.366 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:44:05.368 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetAllPatients (AuthApi) in 89.4402ms
2025-04-09 07:44:05.369 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetAllPatients (AuthApi)'
2025-04-09 07:44:05.370 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 111.6123ms
2025-04-09 07:44:25.363 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - null null
2025-04-09 07:44:25.366 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 07:44:25.369 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:44:25.372 +02:00 [INF] GetPatientsByDoctor called with doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:25.375 +02:00 [INF] Fetching patients for doctorId: 1, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:25.382 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:44:25.394 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 07:44:25.422 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 07:44:25.425 +02:00 [INF] Successfully retrieved 1 patients for doctorId: 1
2025-04-09 07:44:25.426 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:44:25.427 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 55.9273ms
2025-04-09 07:44:25.428 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 07:44:25.429 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/1?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 65.9232ms
2025-04-09 07:44:33.027 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - null null
2025-04-09 07:44:33.031 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 07:44:33.032 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:44:33.033 +02:00 [INF] GetPatientsByDoctor called with doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:33.034 +02:00 [INF] Fetching patients for doctorId: 2, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:33.037 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:44:33.039 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 07:44:33.042 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 07:44:33.043 +02:00 [INF] Successfully retrieved 1 patients for doctorId: 2
2025-04-09 07:44:33.044 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:44:33.045 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 12.1704ms
2025-04-09 07:44:33.046 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 07:44:33.046 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/2?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 19.6006ms
2025-04-09 07:44:44.360 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - null null
2025-04-09 07:44:44.363 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 07:44:44.364 +02:00 [INF] Route matched with {action = "GetPatientsByDoctor", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientsByDoctor(Int32, Int32, Int32, System.String) on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:44:44.366 +02:00 [INF] GetPatientsByDoctor called with doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:44.367 +02:00 [INF] Fetching patients for doctorId: 3, pageNumber: 1, pageSize: 10, searchTerm: null
2025-04-09 07:44:44.370 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Id] = @__doctorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-09 07:44:44.373 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE EXISTS (
    SELECT 1
    FROM [PatientHistories] AS [p0]
    WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
2025-04-09 07:44:44.377 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[FirstName], [t].[LastName], [t].[Gender], [t].[BirthDate], [t].[Email], [t].[ImageUrl], [t].[CreatedAt], [t0].[Diagnosis], [t0].[Treatment], [t0].[DoctorId], [t0].[DoctorFirstName], [t0].[DoctorLastName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [p].[Id], [p].[FirstName], [p].[LastName], [p].[Gender], [p].[BirthDate], [p].[Email], [p].[ImageUrl], [p].[CreatedAt]
    FROM [Patients] AS [p]
    WHERE EXISTS (
        SELECT 1
        FROM [PatientHistories] AS [p0]
        WHERE [p].[Id] = [p0].[PatientId] AND [p0].[DoctorId] = @__doctorId_0)
    ORDER BY [p].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [p1].[Diagnosis], [p1].[Treatment], [p1].[DoctorId], [d].[FirstName] AS [DoctorFirstName], [d].[LastName] AS [DoctorLastName], [p1].[Id], [d].[Id] AS [Id0], [p1].[PatientId]
    FROM [PatientHistories] AS [p1]
    INNER JOIN [Doctors] AS [d] ON [p1].[DoctorId] = [d].[Id]
    WHERE [p1].[DoctorId] = @__doctorId_0
) AS [t0] ON [t].[Id] = [t0].[PatientId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-09 07:44:44.379 +02:00 [INF] Successfully retrieved 2 patients for doctorId: 3
2025-04-09 07:44:44.380 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.DTOs.PagedResult`1[[AuthApi.DTOs.PatientResponseDto, AuthApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-09 07:44:44.381 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi) in 15.6973ms
2025-04-09 07:44:44.384 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetPatientsByDoctor (AuthApi)'
2025-04-09 07:44:44.385 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/patients/doctor/3?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 25.1689ms
2025-04-09 07:45:06.979 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7295/api/User/details - null null
2025-04-09 07:45:06.983 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 07:45:06.989 +02:00 [INF] Route matched with {action = "GetMyDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyDetails() on controller AuthApi.Controllers.UserController (AuthApi).
2025-04-09 07:45:06.993 +02:00 [INF] GetMyDetails called for logged-in user
2025-04-09 07:45:07.000 +02:00 [INF] Fetching user details for userId: 2, role: admin
2025-04-09 07:45:07.010 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Email]
FROM [Admins] AS [a]
WHERE [a].[Id] = @__userId_0
2025-04-09 07:45:07.015 +02:00 [INF] Successfully retrieved details for userId: 2, role: admin
2025-04-09 07:45:07.017 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-09 07:45:07.023 +02:00 [INF] Executed action AuthApi.Controllers.UserController.GetMyDetails (AuthApi) in 30.8596ms
2025-04-09 07:45:07.025 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.UserController.GetMyDetails (AuthApi)'
2025-04-09 07:45:07.027 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7295/api/User/details - 200 null application/json; charset=utf-8 47.9649ms
2025-04-09 10:22:37.924 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:22:38.069 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 10:22:38.159 +02:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:22:38.319 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-04-09 10:22:38.399 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:22:38.479 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 10:22:38.569 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-09 10:22:38.592 +02:00 [INF] Applying migration '20250405215506_AddImageUrlToDoctorAndPatient'.
2025-04-09 10:22:38.845 +02:00 [ERR] Failed executing DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patients] ADD [ImageUrl] nvarchar(max) NULL;
2025-04-09 10:24:30.527 +02:00 [INF] Executed DbCommand (155ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:24:30.667 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 10:24:30.749 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:24:30.828 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 10:24:30.919 +02:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-09 10:24:30.937 +02:00 [INF] Applying migration '20250405215506_AddImageUrlToDoctorAndPatient'.
2025-04-09 10:24:31.175 +02:00 [ERR] Failed executing DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patients] ADD [ImageUrl] nvarchar(max) NULL;
2025-04-09 10:26:40.726 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:26:40.760 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 10:26:40.762 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-09 10:26:40.763 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-09 10:26:40.777 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-09 10:26:40.784 +02:00 [INF] No migrations were applied. The database is already up to date.
